(function(){var ma=Math.PI,na=Math.round,oa=Math.pow,pa=Math.min,qa=Math.floor,ra=Math.max,sa=Math.ceil;function a(a,c,d){function e({range:e={},filter:f={},focusOn:d}={},i){Object.assign(g,e),Object.assign(h,f);const n=m;m=b(a,c,g,h,d,n),i||j.forEach(({prop:a,duration:b,options:c})=>{const d=k.get(a),e=d?d.to:n[a];if(e!==void 0&&e!==m[a]){const e=d?c.includes("fast")?n[a]:d.current:n[a];d&&k.remove(a),k.add(a,e,m[a],b,c)}}),k.isRunning()||l()}function f(){d(ia(m,k.getState()))}const g={begin:0,end:1},h=function(){const b={};return a.datasets.forEach(({key:a})=>{b[a]=!0}),b}(),j=function(){const b=[],c=a.datasets.map(({key:a})=>`opacity#${a} 300`);return ga([Va,c]).forEach(a=>{const[c,d,...e]=a.split(" ");b.push({prop:c,duration:d,options:e})}),b}(),k=i(f),l=ka(f);let m={};return{update:e}}function b(a,b,d,h,i,j){const{begin:k,end:l}=d,m=a.xLabels.length-1,n=ra(0,sa(m*k)),o=pa(qa(m*l),m),p=f(b.width,n,o),q=a.isStacked?e(a,h,n,o,j):c(a,h,n,o,j),r=g(b.height,q.yMinViewport,q.yMaxViewport),s=a.hasSecondYAxis&&g(b.height,q.yMinViewportSecond,q.yMaxViewportSecond),t=U(r);if(q.yMinViewport-=q.yMinViewport%t,s){const a=U(s);q.yMinViewportSecond-=q.yMinViewportSecond%a}const u={};return a.datasets.forEach(({key:a})=>{u[`opacity#${a}`]=h[a]?1:0}),Object.assign({totalXWidth:m,xAxisScale:p,yAxisScale:r,yAxisScaleSecond:s,labelFromIndex:ra(0,n-1),labelToIndex:pa(o+1,m),filter:Object.assign({},h),focusOn:void 0===i?j.focusOn:i},q,u,d)}function c(a,b,c,e,f){const g=a.hasSecondYAxis&&a.datasets.slice(-1)[0],h=a.datasets.filter(a=>b[a.key]&&a!==g),i=d(a,c,e,f,h);if(g){const h=b[g.key]?[g]:[],{yMinViewport:j,yMaxViewport:k,yMinMinimap:l,yMaxMinimap:m}=d(a,c,e,f,[g]);Object.assign(i,{yMinViewportSecond:j,yMaxViewportSecond:k,yMinMinimapSecond:l,yMaxMinimapSecond:m})}return i}function d(a,b,c,d,e){const{min:f=d.yMinMinimap,max:g=d.yMaxMinimap}=fa(ga(e.map(({yMax:a,yMin:b})=>[a,b]))),h=f/g>Ma?f:0;let i,j;if(0===b&&c===a.xLabels.length-1)i=h,j=g;else{const a=e.map(({values:a})=>a),f=a.map(a=>a.slice(b,c+1)),g=fa(ga(f)),h=g.min===void 0?d.yMinViewport:g.min;j=g.max===void 0?d.yMaxViewport:g.max,i=h/j>Ma?h:0}return{yMinViewport:i,yMaxViewport:j,yMinMinimap:h,yMaxMinimap:g}}function e(a,b,c,d,e){const f=a.datasets.filter(a=>b[a.key]),g=f.map(({values:a})=>a),h=g.length?ha(g):[],{max:i=e.yMaxMinimap}=fa(h),{max:j=e.yMaxViewport}=fa(h.slice(c,d+1));return{yMinViewport:0,yMaxViewport:j,yMinMinimap:0,yMaxMinimap:i}}function f(a,b,c){const d=qa(a/Ia);return T((c-b)/d)}function g(a,b,c){const d=qa((a-Ka)/Ja);return V((c-b)/d)}function h(a){return 1-oa(1-a,1.675)}function i(a){function b(a,b,c,d,h){f[a]={from:b,to:c,duration:d,options:h,current:b,startedAt:Date.now(),progress:0},g||(g=requestAnimationFrame(e))}function c(a){delete f[a],d()||(cancelAnimationFrame(g),g=null)}function d(){return!!Object.keys(f).length}function e(){const b={};Object.keys(f).forEach(a=>{const{startedAt:d,from:e,to:g,duration:j=wa,options:i}=f[a],k=pa(1,(Date.now()-d)/j);let l=e+(g-e)*h(k);i.includes("ceil")?l=sa(l):i.includes("floor")&&(l=qa(l)),f[a].current=l,f[a].progress=k,b[a]=l,1===k&&c(a)}),a(b),d()&&(g=requestAnimationFrame(e))}const f={};let g=null;return{add:b,remove:c,get:function(a){return f[a]},getState:function(){const a={};return Object.keys(f).forEach(b=>{const{current:c,from:d,to:e,progress:g}=f[b];a[b]=c,a[`${b}From`]=d,a[`${b}To`]=e,a[`${b}Progress`]=g}),a},isRunning:d}}function j(a,b,c){function d(a){k.innerHTML?k.innerHTML!==a&&(k=ca(k,a,"caption right")):(k.innerHTML=a,m=!1)}function e(a){l=!0,j=ca(i,"Zoom Out","title zoom-out"),_(j,"click",g),d(a)}function f(){h=$a(),h.className="header",i=$a(),i.className="title",i.innerHTML=b,h.appendChild(i),k=$a(),k.className="caption right",h.appendChild(k),a.appendChild(h)}function g(){l=!0,i=ca(j,b,"title",!0),c()}let h,i,j,k,l=!1,m=!0;const n=ja(d,400,!1,!0);return f(),{setCaption:n,zoom:e}}function k(a,b,c,d){function e(b,e,f,g,h,i=1,j=null,k=!1){const l=U(f),m=sa(g/l)*l,n=qa(h/l)*l;a.font=Ha,a.textAlign=k?"right":"left",a.textBaseline="bottom",a.lineWidth=1,a.beginPath();for(let o=m;o<=n;o+=l){const[,b]=e.toPixels(0,o),f=X(i,b);a.fillStyle=j?I(d,`${j}-text`,f):I(d,"y-axis-text",f),k?a.fillText(N(o),c.width-ya,b-5):a.fillText(N(o),ya,b-5),k?(a.strokeStyle=I(d,`${j}-text`,i),a.moveTo(c.width-ya,b),a.lineTo(c.width-20,b)):(a.moveTo(ya,b),a.strokeStyle=I(d,"grid-lines",i),a.lineTo(c.width-ya,b))}a.stroke()}return{drawXAxis:function(e,f){a.clearRect(0,c.height-Ka+1,c.width,31);const g=c.height-15,h=qa(e.xAxisScale),j=S(h),k=1-(e.xAxisScale-h);a.font=Ha,a.textAlign="center",a.textBaseline="middle";for(let h=e.labelFromIndex;h<=e.labelToIndex;h++){const e=h-La;if(0!=e%j)continue;const i=b.xLabels[h],[l]=f.toPixels(h,0);let m=0==e%(2*j)?1:k;m=W(m,l,c.width),a.fillStyle=I(d,"x-axis-text",m),a.fillText(i.text,l,g)}},drawYAxis:function(a,c,d){const{yAxisScale:f,yAxisScaleFrom:g,yAxisScaleTo:h,yAxisScaleProgress:u=0,yMinViewport:i,yMinViewportFrom:j,yMinViewportTo:k,yMaxViewport:l,yMaxViewportFrom:m,yMaxViewportTo:n,yMinViewportSecond:o,yMinViewportSecondFrom:p,yMinViewportSecondTo:q,yMaxViewportSecond:r,yMaxViewportSecondFrom:s,yMaxViewportSecondTo:t}=a,v=d&&b.datasets[0].colorName;if(e(a,c,na(h||f),void 0===k?i:k,void 0===n?l:n,g?u:1,v),0<u&&(void 0!==j||void 0!==m)&&e(a,c,na(g),void 0===j?i:j,void 0===m?l:m,1-u,v),d){const{yAxisScaleSecond:c,yAxisScaleSecondFrom:f,yAxisScaleSecondTo:g,yAxisScaleSecondProgress:h=0}=a,i=b.datasets[b.datasets.length-1].colorName;e(a,d,na(g||c),void 0===q?o:q,void 0===t?r:t,f?h:1,i,!0),0<h&&(void 0!==p||void 0!==s)&&e(a,d,na(f),void 0===p?o:p,void 0===s?r:s,1-h,i,!0)}}}}function l(a,b,c,d){function e(a){const{begin:b,end:c}=a;E||t({begin:b,end:c},!0),k(a)&&(F=ia(a,{focusOn:null}),q(x,y),l(F))}function f(a){w.classList.toggle("hidden",!a),requestAnimationFrame(()=>{w.classList.toggle("transparent",!a)})}function g(){w=$a(),w.className="minimap",w.style.height=`${Na}px`,i(),j(),a.appendChild(w),B={width:x.offsetWidth,height:x.offsetHeight}}function h(){return{width:a.offsetWidth-20,height:Na}}function i(){const{canvas:a,context:b}=p(w,h());x=a,y=b}function j(){C=$a(),C.className="ruler",C.innerHTML="<div class=\"mask\"></div><div class=\"slider\"><div class=\"handle\"><span></span></div><div class=\"inner\"></div><div class=\"handle\"><span></span></div></div><div class=\"mask\"></div>",D=C.children[1],ba(D.children[1],{onCapture:m,onDrag:o,onRelease:n,draggingCursor:"grabbing"}),ba(D.children[0],{onCapture:m,onDrag:r,onRelease:n,draggingCursor:"ew-resize"}),ba(D.children[2],{onCapture:m,onDrag:s,onRelease:n,draggingCursor:"ew-resize"}),w.appendChild(C)}function k(a){if(!F)return!0;const c=b.datasets.map(({key:a})=>`opacity#${a}`);return c.push("yMaxMinimap"),c.some(b=>F[b]!==a[b])}function l(a={}){const{datasets:d}=b,e={from:0,to:a.totalXWidth},f={begin:0,end:1,totalXWidth:a.totalXWidth,yMin:a.yMinMinimap,yMax:a.yMaxMinimap,availableWidth:B.width,availableHeight:B.height,yPadding:1},g=d.map(({key:b})=>$(a,b)),h=u(b,d,e,g,f,!0),i=z(f);let j=null,k=null;if(b.hasSecondYAxis){const c=d.find(a=>a.hasOwnYAxis),f={yMin:a.yMinMinimapSecond,yMax:a.yMaxMinimapSecond};j=u(b,[c],e,g,f)[0],k=i.copy(f)}A(y,a,b,e,h,i,j,k,Oa,g,c,!0)}function m(a){E=a.target.offsetLeft}function n(){E=null}function o(a,b,{dragOffsetX:c}){const d=B.width-D.offsetWidth,e=ra(0,pa(E+c-Pa,d)),f=e+D.offsetWidth,g=e/B.width,h=f/B.width;t({begin:g,end:h})}function r(a,b,{dragOffsetX:c}){const d=D.offsetLeft+D.offsetWidth-16,e=pa(d,ra(0,E+c)),f=e/B.width;t({begin:f})}function s(a,b,{dragOffsetX:c}){const d=D.offsetLeft+16,e=B.width,f=ra(d,pa(E+Pa+c,e)),g=f/B.width;t({end:g})}function t(a,b){const c=Object.assign({},G,a);c.begin===G.begin&&c.end===G.end||(G=c,H(),!b&&d(G))}function v(){const{begin:a,end:b}=G;C.children[0].style.width=`${100*a}%`,C.children[1].style.width=`${100*(b-a)}%`,C.children[2].style.width=`${100*(1-b)}%`}let w,x,y,B,C,D,E,F,G={};const H=ka(v);return g(),t(va),{update:e,toggle:f}}function m(a,b,c,d,e,f){function g(a){L.classList.toggle("loading",a)}function h(a){R=a,L.classList.toggle("zoomed",a)}function i(){H=$a(),H.className="tooltip",j(),k(),"ontouchstart"in window?(_(H,"touchmove",l),_(H,"touchstart",l),_(document,"touchstart",m)):(_(H,"mousemove",l),_(H,"click",n),_(document,"mousemove",m)),a.appendChild(H)}function j(){const{canvas:a,context:b}=p(H,c);J=a,K=b}function k(){L=$a(),L.className="balloon",L.innerHTML="<div class=\"title\"></div><div class=\"legend\"></div><div class=\"spinner\"></div>",_(L,"click",o),H.appendChild(L)}function l(a){if(!(a.target===L||L.contains(a.target)||O)){const b=B(H);M=(a.touches?a.touches[0].clientX:a.clientX)-b.left,N=(a.touches?a.touches[0].clientY:a.clientY)-b.top,S()}}function m(a){null===M||a.target===H||H.contains(a.target)||r()}function n(a){const b=O;O=null,l(a,!0);const c=s();c!==b&&(O=c)}function o(){if(!L.classList.contains("zoomed")){const a=E.findClosesLabelIndex(M);e(a)}}function r(a){M=null,O=null,q(J,K),z(),!a&&f&&f(null)}function s(){const a=E.findClosesLabelIndex(M);return a<C.labelFromIndex||a>C.labelToIndex?null:a}function t(a){if(!M||!C)return;const e=s();if(!e)return void r(a);const g=A(),h=!b.isPie||g.distance>=Ga;!a&&f&&(b.isPie?f(g):f(e));const[i]=E.toPixels(e,0),j=b.datasets.map(({key:a,name:b,colorName:c,values:d,hasOwnYAxis:f},g)=>({key:a,name:b,colorName:c,value:d[e],hasOwnYAxis:f,originalIndex:g})).filter(({key:a})=>C.filter[a]);j.length&&h?x(j,i,e):z(),(b.isLines||b.isAreas)&&(q(J,K),b.isLines&&u(j,e),w(i,c.height-Ka,I(d,"grid-lines")))}function u(a,b){a.forEach(({value:a,colorName:c,hasOwnYAxis:e,originalIndex:f})=>{const g=b-C.labelFromIndex,h=e?F[g]:D[f][g];if(h){const[a,f]=e?G.toPixels(b,h.stackValue):E.toPixels(b,h.stackValue);v([a,f],I(d,`${c}-line`),I(d,"background"))}})}function v([a,b],c,d){K.strokeStyle=c,K.fillStyle=d,K.lineWidth=2,K.beginPath(),K.arc(a,b,4,0,2*ma),K.fill(),K.stroke()}function w(a,b,c){K.strokeStyle=c,K.lineWidth=1,K.beginPath(),K.moveTo(a,0),K.lineTo(a,b),K.stroke()}function x(a,c,d){const e=(C.labelFromIndex+C.labelToIndex)/2,f=d<e?M+Fa:M-(L.offsetWidth+Fa);L.style.transform=`translateX(${f}px) translateZ(0)`,L.classList.add("shown");const g=R?b.xLabels[d].text:Q(b.xLabels[d]);T(g,a)}function y(a,b){const c=L.children[0],d=c.querySelector(":not(.hidden)");c.innerHTML&&d?d.innerHTML!==a&&ca(d,a,"title-inner"):c.innerHTML=`<span>${a}</span>`;const e=L.children[1];Array.from(e.children).forEach(a=>{a.setAttribute("data-present","false")}),b.forEach(({name:a,colorName:b,value:c})=>{c=P(c);const d=e.querySelector(`[data-name="${a}"]`),f=`value right ${b}`;if(!d){const b=$a();b.className="dataset",b.setAttribute("data-present","true"),b.setAttribute("data-name",a),b.innerHTML=`<span>${a}</span><span class="${f}">${c}</span>`,e.appendChild(b)}else{d.setAttribute("data-present","true");const a=d.querySelector(`.value.${b}:not(.hidden)`);a.innerHTML!==c&&ca(a,c,f)}}),Array.from(e.querySelectorAll("[data-present=\"false\"]")).forEach(a=>{a.remove()})}function z(){L.classList.remove("shown")}function A(){var a=Math.sqrt,b=Math.atan2;const{width:c,height:d}=H.getBoundingClientRect(),e=[c/2,d/2],f=b(N-e[1],M-e[0]),g=a((M-e[0])**2+(N-e[1])**2);return{angle:f>=-ma/2?f:2*ma+f,distance:g}}function B(a){return a.getBoundingClientRect()}let C,D,E,F,G,H,J,K,L,M,N,O=null,R=!1;const S=ka(t),T=ja(y,400,!0,!0);return i(),{update:function(a,b,c,d,e){C=a,D=b,E=c,F=d,G=e,t(!0)},toggleSpinner:g,toggleIsZoomed:h}}function n(a,b,c){function d(){if(g){const a=g;a.classList.add("hidden"),setTimeout(()=>{a.parentNode.removeChild(a)},500)}e(),g.classList.add("transparent"),requestAnimationFrame(()=>{g.classList.remove("transparent")})}function e(){g=$a(),g.className="tools",2>b.datasets.length&&(g.className+=" hidden"),b.datasets.forEach(({key:a,name:b,colorName:c})=>{const d=$a("a");d.href="#",d.dataset.key=a,d.className=`checkbox ${c} checked`,d.innerHTML=`<span class="circle"></span><span class="label">${b}</span>`,d.addEventListener("click",f),g.appendChild(d)}),a.appendChild(g)}function f(a){if(a){a.preventDefault();const b=a.currentTarget;b.classList.contains("checked")&&2>g.querySelectorAll(".checked").length?(b.classList.remove("shake"),requestAnimationFrame(()=>{b.classList.add("shake")})):b.classList.toggle("checked")}const b={};Array.from(g.getElementsByTagName("a")).forEach(a=>{b[a.dataset.key]=a.classList.contains("checked")}),c(b)}let g;return e(),f(),{redraw:d}}function o(a,b,c,d,e,f,g){function h(c,e){if(!b.dataSource||p)return;m=c,d.zoom(Q(a.xLabels[e])),f.toggleSpinner(!0),f.toggleIsZoomed(!0);const{value:g}=a.xLabels[e],h=b.zoomToPie?Promise.resolve(l(c)):j(new Date(g));h.then(a=>k(a,e))}function i(){return p}function j(a){const{dataSource:c}=b,d=a.getMonth()+1,e=a.getDate(),f=`${a.getFullYear()}-${10>d?"0":""}${d}/${10>e?"0":""}${e}`;return fetch(`${c}/${f}.json`).then(a=>a.json())}function k(d,h){f.toggleSpinner(!1);const i=1/a.xLabels.length,j=h/(a.xLabels.length-1),k={};a.datasets.forEach(({key:a})=>k[a]=!1),c.update({range:{begin:j-i/2,end:j+i/2},filter:k}),setTimeout(()=>{o=p?null:Q(a.xLabels[h]),Object.assign(a,s(d,b.datasetColors,p||b.zoomToPie?"days":"hours")),b.noMinimapOnZoom&&(e.toggle(p),g.redraw()),c.update({range:{begin:Sa-Ra,end:Sa+Ra},focusOn:null},!0);const f=p||b.zoomToPie?a.xLabels.length:a.xLabels.length/24,i=1/f/2;let j,k;p?(j={begin:m.begin,end:m.end},k=b.noMinimapOnZoom?m.filter:n.filter):b.noMinimapOnZoom?(j={begin:0,end:1},k={},a.datasets.forEach(({key:a})=>k[a]=!0)):(j={begin:Sa-i,end:Sa+i},k=m.filter),c.update({range:j,filter:k}),p=!p},Qa)}function l(a){return r(b).then(b=>{const c=Object.assign({},b);return c.columns=b.columns.map(b=>{const c=b.slice(a.labelFromIndex+1,a.labelToIndex+1);return c.unshift(b[0]),c}),Object.keys(c.types).forEach(a=>{"x"!==a&&(c.types[a]="pie")}),c.pie=!0,c})}let m,n,o,p=!1;return{zoomIn:h,zoomOut:function(a){n=a,f.toggleIsZoomed(!1);const c=na((a.labelFromIndex+a.labelToIndex)/2);r(b).then(a=>k(a,c))},isZoomed:i}}function p(a,{width:b,height:c}){const d=$a("canvas");d.width=b*ta,d.height=c*ta,d.style.width="100%",d.style.height=`${c}px`;const e=d.getContext("2d");return e.scale(ta,ta),a.appendChild(d),{canvas:d,context:e}}function q(a,b){b.clearRect(0,0,a.width,a.height)}function r(a){const{data:b,dataSource:c}=a;if(b)return Promise.resolve(b);return c?fetch(`${c}/overview.json`).then(a=>a.json()):void 0}function s(a,b,c){const{datasets:d,labels:e}=t(a,b);let f=1/0,g=-Infinity;return d.forEach(a=>{const{min:b,max:c}=fa(a.values);b<f&&(f=b),c>g&&(g=c),a.yMin=b,a.yMax=c}),{datasets:d,yMin:f,yMax:g,xLabels:"hours"===c?M(e):L(e),hasSecondYAxis:a.y_scaled,isStacked:a.stacked,isPercentage:a.percentage,isPie:a.pie,isLines:d.some(({type:a})=>"line"===a),isBars:d.some(({type:a})=>"bar"===a),isAreas:d.some(({type:a})=>"area"===a)}}function t(a,b={}){const{columns:c,names:d,types:e,y_scaled:f}=a;let g=[];const h=[];return c.forEach((a,j)=>{const i=a.shift();return i===ua?void(g=a):void h.push({key:i,colorName:b[i],name:d[i],type:e[i],values:a,hasOwnYAxis:f&&j===c.length-1})}),{datasets:h,labels:g}}function u(a,b,c,d,e,f){let g=b.map(({values:a})=>a.slice(c.from,c.to+1));a.isPie&&!f&&(g=y(g));const h=g.map((b,e)=>b.map((b,f)=>{let g=b;return a.isStacked&&(g*=d[e]),{labelIndex:c.from+f,value:b,visibleValue:g,stackOffset:0,stackValue:g}}));return a.isPercentage&&w(h,e),a.isStacked&&x(h),h}function v(a){return ha(a.map(a=>a.map(({visibleValue:a})=>a)))}function w(a,b){const c=v(a);a.forEach(a=>{a.forEach((a,d)=>{a.percent=a.visibleValue/c[d],a.visibleValue=a.percent*b.yMax})})}function x(a){const b=[];a.forEach(a=>{a.forEach((a,c)=>{b[c]===void 0&&(b[c]=0),a.stackOffset=b[c],b[c]+=a.visibleValue,a.stackValue=b[c]})})}function y(a){return a.map(a=>[a.reduce((a,b)=>a+b,0)])}function z(a){function b(a,b){return[a*n-o,j-(b*q-r)]}function c(a){return na((a+o)/n)}const{begin:d,end:e,totalXWidth:f,yMin:g,yMax:h,availableWidth:i,availableHeight:j,xPadding:k=0,yPadding:l=0}=a;let m=i;0===d&&(m-=k),1===e&&(m-=k);const n=m/((e-d)*f);let o=d*f*n;0===d&&(o-=k);const p=j-l,q=p/(h-g),r=g*q;return{toPixels:b,findClosesLabelIndex:c,copy:function(b,c){return z(ia(a,b),c)},getCenter:function(){return[i/2,j-p/2]},getSize:function(){return[i,p]},getParams:function(){return a}}}function A(a,b,c,d,e,f,g,h,j,k,l,m){if(c.datasets.forEach(({colorName:n,type:o,hasOwnYAxis:p},q)=>{if(!k[q])return;const i={color:I(l,`${n}-line`),lineWidth:j,opacity:c.isStacked?1:k[q]},r="pie"===o&&m?"area":o;let s=p?g:e[q],t=p?h:f;if("area"===r){const{yMin:a,yMax:b}=f.getParams(),c=b-a,g=[{labelIndex:d.from,stackValue:0},{labelIndex:d.to,stackValue:0}],h=[{labelIndex:d.to,stackValue:c},{labelIndex:d.from,stackValue:c}];s=ga([e[q-1]||g,h])}if("pie"===r&&(i.center=f.getCenter(),i.radius=pa(...f.getSize())*Ca,i.pointerVector=b.focusOn),"bar"===r){const[a]=f.toPixels(0,0),[c]=f.toPixels(1,0);i.lineWidth=c-a,i.focusOn=b.focusOn}B(r,a,s,t,i)}),b.focusOn&&c.isBars){const[c]=f.toPixels(0,0),[d]=f.toPixels(1,0);E(a,f,{focusOn:b.focusOn,color:I(l,"mask"),lineWidth:d-c})}}function B(a,...b){return"line"===a?C(...b):"bar"===a?D(...b):"area"===a?F(...b):"pie"===a?G(...b):void 0}function C(a,b,c,d){a.beginPath();for(let e=0,f=b.length;e<f;e++){const{labelIndex:d,stackValue:f}=b[e],[g,h]=c.toPixels(d,f);a.lineTo(g,h)}a.save(),a.strokeStyle=d.color,a.lineWidth=d.lineWidth,a.globalAlpha=d.opacity,a.lineJoin="bevel",a.lineCap="butt",a.stroke(),a.restore()}function D(a,b,c,d){const{yMin:e}=c.getParams();a.save(),a.globalAlpha=d.opacity,a.fillStyle=d.color;for(let f=0,g=b.length;f<g;f++){const{labelIndex:g,stackValue:h,stackOffset:i=0}=b[f],[,j]=c.toPixels(g,ra(i,e)),[k,l]=c.toPixels(g,h),m=k-d.lineWidth/2,n=1===d.opacity?d.lineWidth+Ea:d.lineWidth;a.fillRect(m,l,n,j-l)}a.restore()}function E(a,b,c){const[d,e]=b.getCenter(),[f,g]=b.getSize(),[h]=b.toPixels(c.focusOn,0);a.fillStyle=c.color,a.fillRect(d-f/2,e-g/2,h-c.lineWidth/2+Ea,g),a.fillRect(h+c.lineWidth/2,e-g/2,f-(h+c.lineWidth/2),g)}function F(a,b,c,d){a.beginPath();for(let e=0,f=b.length;e<f;e++){const{labelIndex:d,stackValue:f}=b[e],[g,h]=c.toPixels(d,f);a.lineTo(g,h)}a.save(),a.fillStyle=d.color,a.lineWidth=d.lineWidth,a.globalAlpha=d.opacity,a.lineJoin="bevel",a.lineCap="butt",a.fill(),a.restore()}function G(a,b,c,d){const{visibleValue:e,stackValue:f,stackOffset:g=0}=b[0];if(!e)return;const{yMin:h,yMax:i}=c.getParams(),j=1/(i-h),k=e*j,l=2*(g*j*ma)-ma/2,m=2*(f*j*ma)-ma/2,{radius:o=120,center:[p,q],pointerVector:n}=d,r=n&&l<=n.angle&&n.angle<m&&n.distance<=o?Da:0,s=(l+m)/2,t=Math.cos(s),u=Math.sin(s),v=t*r,w=u*r;a.save(),a.beginPath(),a.fillStyle=d.color,a.moveTo(p+v,q+w),a.arc(p+v,q+w,o,l,m),a.lineTo(p+v,q+w),a.fill(),a.font=`700 ${Y(k,o)}px Helvetica, Arial, sans-serif`,a.textAlign="center",a.textBaseline="middle",a.fillStyle="white";const x=Z(k,o);a.fillText(`${na(100*k)}%`,p+t*x+v,q+u*x+w),a.restore()}function H(a){const b={};return["skin-day","skin-night"].forEach(c=>{b[c]={},Object.keys(Wa[c]).forEach(d=>{const e=J(Wa[c][d]);d.startsWith(`palette-${a}`)?b[c][d.replace(`palette-${a}-`,"")]=e:!d.startsWith(`palette-`)&&(b[c][d]=e)})}),b}function I(a,b,c){return K(a[Xa][b],c)}function J(a){const[b,c]=a.replace("#","").split("/");return[parseInt(b.slice(0,2),16),parseInt(b.slice(2,4),16),parseInt(b.slice(4,6),16),c?parseFloat(c):1]}function K([c,d,e,b=1],a=1){return`rgba(${c}, ${d}, ${e}, ${b*a})`}function L(a){return a.map(a=>{const b=new Date(a),c=b.getDate(),d=Ta[b.getMonth()];return{value:a,text:`${c} ${d}`}})}function M(a){return a.map(a=>{const b=new Date(a),c=b.getUTCHours(),d=b.getUTCMinutes();return{value:a,text:`${10>c?"0":""}${c}:${10>d?"0":""}${d}`}})}function N(a,b=1){if(1e6<=a)return O(a/1e6,b)+"M";return 1e3<=a?O(a/1e3,b)+"K":a}function O(a,b){return a.toFixed(b).replace(/(\d{3,})\.\d+/,"$1").replace(/\.0+$/,"")}function P(a){return(a+"").replace(/\d(?=(\d{3})+$)/g,"$& ")}function Q(a){const{value:b}=a,c=new Date(b);return`${Ua[c.getDay()]}, ${R(a)}`}function R(a){const{value:b}=a,c=new Date(b),d=c.getDate(),e=Ta[c.getMonth()];return`${d} ${e} ${c.getFullYear()}`}function S(a){return oa(2,a)}function T(a){return sa(Math.log2(a||1))}function U(a){return Ya[a]||Ya[Ya.length-1]}function V(a){return Ya.findIndex(b=>b>=a)||Ya.length-1}function W(a,b,c){const d=pa(b+ya,c-b);return 40>=d&&(a=pa(1,a,d/40)),a}function X(a,b){return b-ya<=20?pa(1,a,(b-ya)/20):a}function Y(a,b){return(b+150*a)/8}function Z(a,b){return .99<=a?0:pa(1-Math.log(30*a)/5,4/5)*b}function $(a,b){return ra(0,pa(2*a[`opacity#${b}`]-1,1))}function _(a,b,c){a.addEventListener(b,c)}function aa(a,b,c){a.removeEventListener(b,c)}function ba(a,b){function c(c){c.target!==a||(c.preventDefault(),g=c,"mousedown"===c.type?(_(document,"mousemove",f),_(document,"mouseup",d)):"touchstart"===c.type&&(_(document,"touchmove",f),_(document,"touchend",d),_(document,"touchcancel",d),c.pageX===void 0&&(c.pageX=c.touches[0].pageX)),b.draggingCursor&&document.body.classList.add(`cursor-${b.draggingCursor}`),b.onCapture&&b.onCapture(c))}function d(a){g&&(b.draggingCursor&&document.body.classList.remove(`cursor-${b.draggingCursor}`),aa(document,"mouseup",d),aa(document,"mousemove",f),aa(document,"touchcancel",d),aa(document,"touchend",d),aa(document,"touchmove",f),g=null,b.onRelease&&b.onRelease(a))}function f(a){g&&("touchmove"===a.type&&a.pageX===void 0&&(a.pageX=a.touches[0].pageX),b.onDrag(a,g,{dragOffsetX:a.pageX-g.pageX}))}let g=null;_(a,"mousedown",c),_(a,"touchstart",c)}function ca(a,b,c="",d=!1){const e=a.parentNode;e.classList.add("transition-container");const f=$a(a.tagName);f.className=`${c} transition ${d?"top":"bottom"} hidden`,f.innerHTML=b;const g=c.length?`.${c.split(" ").join(".")}`:"",h=e.querySelectorAll(`${g}.hidden`);return h.forEach(a=>a.remove()),a.classList.add("transition"),a.classList.remove("bottom","top"),a.classList.add(d?"bottom":"top"),e.insertBefore(f,a.nextSibling),da(f),ea(a),f}function da(a){a.classList.remove("animated"),a.classList.add("animated"),a.classList.remove("hidden")}function ea(a){a.classList.remove("animated"),a.classList.add("animated"),a.classList.add("hidden")}function fa(a){const b=a.length;let c=a[0],d=a[0];for(let e=0;e<b;e++){const b=a[e];b>c?c=b:b<d&&(d=b)}return{max:c,min:d}}function ga(a){return[].concat.apply([],a)}function ha(a){const b=[],c=a.length;for(let d=0,e=a[0].length;d<e;d++){b[d]=0;for(let e=0;e<c;e++)b[d]+=a[e][d]}return b}function ia(a,b){return new Proxy({},{get:(c,d)=>void 0===b[d]?a[d]:b[d]})}function ja(a,b,c=!0,d=!0){let e,f,g=!1;return function(...h){e=h,f=!0,g||(c&&(f=!1,a(...e)),g=!0,setTimeout(()=>{g=!1,d&&f&&a(...e)},b))}}function ka(a){let b,c=!1;return function(...d){b=d,c||(c=!0,requestAnimationFrame(()=>{c=!1,a(...b)}))}}function la(a,b,c=!0,d=!0){let e=null;return function(){e?(clearTimeout(e),e=null):c&&a(),e=setTimeout(()=>{d&&a(),e=null},b)}}window.LovelyChart={create:function(b){function c(){y.update()}function d(){e(),F=j(B,b.title,w),f(),y=a(x,E,g),G=k(D,x,E,N),I=l(B,x,N,h),J=m(B,x,E,N,v,t),K=n(B,x,i),L=o(x,b,y,F,I,J,K)}function e(){B=$a(),B.className=`lovely-chart palette-${b.palette||xa}`,Za(B);const a=document.getElementById(b.containerId);a.appendChild(B)}function f(){const{canvas:a,context:b}=p(B,{width:B.clientWidth,height:za});C=a,D=b,E={width:C.offsetWidth,height:C.offsetHeight}}function g(a){M=a;const{datasets:b}=x,c={from:a.labelFromIndex,to:a.labelToIndex},d={begin:a.begin,end:a.end,totalXWidth:a.totalXWidth,yMin:a.yMinViewport,yMax:a.yMaxViewport,availableWidth:E.width,availableHeight:E.height-Ka,xPadding:ya,yPadding:Aa},e=b.map(({key:b})=>a[`opacity#${b}`]),f=u(x,b,c,e,d),g=z(d);let h=null,i=null;if(x.hasSecondYAxis){const d=b.find(a=>a.hasOwnYAxis),f={yMin:a.yMinViewportSecond,yMax:a.yMaxViewportSecond};h=u(x,[d],c,e,f)[0],i=g.copy(f)}F.setCaption(L.isZoomed()?Q(x.xLabels[a.labelFromIndex]):`${R(x.xLabels[a.labelFromIndex+1])}`+" - "+`${R(x.xLabels[a.labelToIndex-1])}`),q(C,D),A(D,a,x,c,f,g,h,i,Ba,e,N),x.isPie||(G.drawYAxis(a,g,i),G.drawXAxis(a,g)),I.update(a),J.update(a,f,g,h,i)}function h(a){y.update({range:a})}function i(a){y.update({filter:a})}function t(a){(x.isBars||x.isPie)&&y.update({focusOn:a})}function v(a){L.zoomIn(M,a)}function w(){L.zoomOut(M)}let x,y,B,C,D,E,F,G,I,J,K,L,M;const N=H(b.palette);return r(b).then(a=>{x=s(a,b.datasetColors),d()}),{redraw:c}},setupColors:function(a){Wa=a},changeSkin:function(a){Xa=a}};const ta=window.devicePixelRatio||1,ua="x",va={begin:.333,end:.667},wa=300,xa="type-1",ya=10,za=320,Aa=10,Ba=2,Ca=.9/2,Da=10,Ea=.5,Fa=20,Ga=150,Ha="300 10px Helvetica, Arial, sans-serif",Ia=45,Ja=50,Ka=30,La=1,Ma=.1,Na=40,Oa=1,Pa=8,Qa=wa,Ra=.1,Sa=.5,Ta=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Ua=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Va=["begin 200 fast","end 200 fast","labelFromIndex 200 fast floor","labelToIndex 200 fast ceil","xAxisScale 400","yMinViewport","yMaxViewport","yMinViewportSecond","yMaxViewportSecond","yMinMinimap","yMaxMinimap","yMinMinimapSecond","yMaxMinimapSecond","yAxisScale","yAxisScaleSecond"];let Wa,Xa="skin-day";const Ya=[1,2,8,18,50,100,250,500,1e3,2500,5e3,1e4,25e3,5e4,1e5,25e4,5e5,1e6,25e5,5e6,1e7,25e6,5e7,1e8],Za=(()=>{const a=[],b=la(function(){a.forEach(a=>{a.classList.remove("hidden")})},500,!0,!1),c=la(function(){a.forEach(a=>{const{top:b,bottom:c}=a.getBoundingClientRect(),d=0>c||b>window.innerHeight;a.classList.toggle("hidden",d)})},500,!1,!0);return function(d){a.push(d),1===a.length&&(window.onscroll=()=>{b(),c()})}})(),$a=(a="div")=>document.createElement(a)})();