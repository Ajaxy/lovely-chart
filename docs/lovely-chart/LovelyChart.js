!function(){function t(t,e,n){const o=t,i=e,a=n;function r(t,e,n,i=1){const r=n<=13?2*Math.pow(n,2):(n%10||1)*Math.pow(10,Math.floor(n/10)+1),s=Math.floor(t.yMin/r)*r,c=Math.ceil(t.yMax/r)*r;o.textAlign="left",o.textBaseline="bottom",o.strokeStyle=J(t,"yAxisRulers",i),o.lineWidth=1,o.beginPath();for(let n=s;n<=c;n+=r){const{yPx:r}=e.toPixels(0,n);if(r>a.height-x)continue;let s=i;r-d<=2*d&&(s=Math.min(1,i,(r-d)/(2*d))),o.fillStyle=J(t,"axesText",s),o.fillText(B(n),d,r-d/2),o.moveTo(d,r),o.lineTo(a.width-d,r)}o.stroke()}return{update:function(t,e){o.font=g,function(t,e){const n=a.height-x/2,r=Math.floor(t.xAxisScale),s=Math.pow(2,r),c=1-(t.xAxisScale-r);o.textAlign="center",o.textBaseline="middle";for(let r=Math.floor(t.labelFromIndex)-h;r<=t.labelToIndex+h;r++){if((r-y)%s!=0)continue;const l=i.xLabels[r];if(!l)continue;const{xPx:u}=e.toPixels(r,0);let h=(r-y)%(2*s)==0?1:c;const f=Math.min(u+d,a.width-u);f<=4*d&&(h=Math.min(1,h,f/(4*d))),o.fillStyle=J(t,"axesText",h),o.fillText(l.text,u,n)}}(t,e),function(t,e){const{yAxisScale:n,yAxisScaleOriginalFrom:o,yAxisScaleTo:i,yAxisScaleTotalProgress:a}=t;a&&a%1!=0?(r(t,e,o,1-a),r(t,e,i,a)):r(t,e,n)}(t,e)}}}function e(t,e,i,a,r){const{begin:s,end:c}=i,l=t.xLabels.length-1,d=Math.max(0,Math.ceil(l*s)),u=Math.min(l,Math.floor(l*c)),h=t.datasets.filter(({key:t})=>a[t]).map(({values:t})=>t),f=h.map(t=>t.slice(d,u+1)),{min:g=r.yMinFiltered,max:m=r.yMaxFiltered}=X(j(h)),p=g/m>.5?g:0,{min:x=r.yMin,max:y=r.yMax}=X(j(f)),v=g/m>.5?x:0,M=n(t.xLabels.length,e.width,s,c),b=o(e.height,v,y),L={};return t.datasets.forEach(({key:t})=>{L[`opacity#${t}`]=a[t]?1:0}),Object.assign({xOffset:s*l,xWidth:(c-s)*l,yMinFiltered:p,yMaxFiltered:m,yMin:v,yMax:y,xAxisScale:M,yAxisScale:b,labelFromIndex:d,labelToIndex:u,filter:a},L,function(){const t={};return Object.keys(C.day).forEach(e=>{["R","G","B"].forEach((n,o)=>{t[`colorChannels#${e}#${n}`]=C[document.body.classList.contains("skin-night")?"night":"day"][e][o]})}),t}(),i)}function n(t,e,n,o){const i=t*(o-n),a=Math.floor(e/m),r=i/a;return Math.ceil(Math.log2(r))}function o(t,e,n){const o=t-x,i=n-e,a=Math.floor(o/p),r=i/a;return Math.ceil(r<=288?Math.sqrt(r/2):10*Math.floor(Math.log10(r)-1)+r/Math.pow(10,Math.floor(Math.log10(r))))}window.LovelyChart={create:function(n,o){const g=function(t){const{datasets:e}=function(t){const{columns:e,names:n,colors:o}=t;let i=[];const a=[];return e.forEach(t=>{const e=t.shift();e!==s?a.push({key:e,color:o[e],name:n[e],values:t}):function(t){for(let e=0,n=t.length;e<n;e++)if(void 0!==t[e]&&void 0!==t[e+1]&&t[e]>=t[e+1])throw new Error("Array is not sorted")}(i=t)}),a.forEach(t=>{t.labels=i}),{datasets:a}}(t);let n=1/0,o=-1/0;e.forEach(t=>{const{max:e}=X(t.values);0<n&&(n=0),e>o&&(o=e),t.yMin=0,t.yMax=e});const i=e.map(t=>t.labels[0]),a=e.map(t=>t.labels[t.labels.length-1]),r=Math.min.apply(null,i),c=Math.max.apply(null,a),l=function(t,e){t=R(t),e=R(e);const n=[];for(let o=t;o<=e;o+=w){const t=new Date(o),e=t.getDate(),i=$[t.getMonth()];n.push({value:o,text:`${i} ${e}`})}return n}(r,c);return{datasets:e,yMin:n,yMax:o,xLabels:l}}(o);let m,p,y,E,C,W,N;function q(){return{width:p.offsetWidth,height:p.offsetHeight}}function G(t){const e=O(t,function(){const{width:t,height:e}=q();return{width:t,height:e-x}}(),{xPadding:d,yPadding:f});r(p,y),E.update(t,e),function(t,e){const n={from:Math.max(0,t.labelFromIndex-h),to:Math.min(t.labelToIndex+h,g.xLabels.length-1)};g.datasets.forEach(({key:o,color:i,values:a})=>{const r={color:i,opacity:t[`opacity#${o}`],lineWidth:u};D(y,a,e,r,n,F)})}(t,e),W.update(t),N.update(t,e)}function z(t){C.update({range:t})}function K(t){C.update({filter:t})}return function(t){(m=document.createElement("div")).className="lovely-chart",document.getElementById(t).appendChild(m)}(n),function(){const{canvas:t,context:e}=a(m,{width:m.clientWidth,height:m.clientWidth*l});p=t,y=e}(),E=t(y,g,q()),C=function(t,n,o){const i=t,a=n,r=o,s={begin:0,end:1},c=function(){const t={};return i.datasets.forEach(({key:e})=>{t[e]=!0}),t}(),l=j([A,i.datasets.map(({key:t})=>`opacity#${t}`)]),d=function(t){const e=t,n={};let o=null;function i(t){delete n[t],a()||(cancelAnimationFrame(o),o=null)}function a(){return Boolean(Object.keys(n).length)}function r(){const t={};Object.keys(n).forEach(e=>{const{startedAt:o,from:a,to:r}=n[e],s=Math.min(1,(Date.now()-o)/T),c=a+(r-a)*function(t){return Math.sin(Math.PI/2*t)}(s);n[e].current=c,n[e].progress=s,t[e]=c,1===s&&i(e)}),e(t),a()&&(o=requestAnimationFrame(r))}return{add:function(t,e,i,a){n[t]={from:e,to:i,current:e,origin:a,startedAt:Date.now(),progress:0},o||(o=requestAnimationFrame(r))},remove:i,get:function(t){return n[t]},getState:function(){const t={};return Object.keys(n).forEach(e=>{const{current:o,from:i,to:a,progress:r,origin:s}=n[e];t[e]=o,t[`${e}From`]=i,t[`${e}To`]=a,t[`${e}Progress`]=r,t[`${e}OriginalFrom`]=s?s.from:i,t[`${e}TotalProgress`]=s&&s.progress?(s.progress+r)/(s.progress+1):r}),t},isRunning:a}}(f),u=I(f);let h={};function f(){r(Object.assign({},h,d.getState()))}return{update:function({range:t={},filter:n={}}={}){Object.assign(s,t),Object.assign(c,n);const o=h;h=e(i,a,s,c,o),l.forEach(t=>{const e=d.get(t),n=e?e.to:o[t];if(void 0!==n&&n!==h[t]){const n=e?e.current:o[t],i=e&&e.origin||e;e&&d.remove(t),d.add(t,n,h[t],i)}}),d.isRunning()||u()}}}(g,q(),G),W=function(t,e,n){const o=t,i=e,s=n;let l,d,u,h,f,g,m,p={},x=null;const y=I(function(){const{begin:t,end:e}=p;h.children[0].style.width=`${100*t}%`,h.children[1].style.width=`${100*(e-t)}%`,h.children[2].style.width=`${100*(1-e)}%`});function E(t){g=t.target.offsetLeft}function w(t,e,{dragOffsetX:n}){const o=d.offsetWidth,i=o-f.offsetWidth,a=Math.max(0,Math.min(g+n,i)),r=a+f.offsetWidth,s=a/o,c=r/o;P({begin:s,end:c})}function $(t,e,{dragOffsetX:n}){const o=d.offsetWidth,i=f.offsetLeft+f.offsetWidth-2*b,a=Math.min(i,Math.max(0,g+n)),r=a/o;P({begin:r})}function k(t,e,{dragOffsetX:n}){const o=d.offsetWidth,i=f.offsetLeft+2*b,a=o,r=Math.max(i,Math.min(g+b+n,a)),s=r/o;P({end:s})}function P(t){const e=Object.assign({},p,t);e.begin===p.begin&&e.end===p.end||(p=e,y(),s(p),x&&(clearTimeout(x),x=null),x=setTimeout(()=>{s(p)},50))}return(l=document.createElement("div")).className="minimap",l.style.height=`${v}px`,function(){const{canvas:t,context:e}=a(l,{width:o.offsetWidth-2*M,height:v});d=t,u=e}(),(h=document.createElement("div")).className="ruler",h.innerHTML=L,H(f=h.children[1],{onCapture:E,onDrag:w,draggingCursor:"grabbing"}),H(f.children[0],{onCapture:E,onDrag:$,draggingCursor:"ew-resize"}),H(f.children[1],{onCapture:E,onDrag:k,draggingCursor:"ew-resize"}),l.appendChild(h),o.appendChild(l),P(c),{update:function(t){(function(t){if(!m)return!0;const e=i.datasets.map(({key:t})=>`opacity#${t}`);return e.push("yMaxFiltered"),e.some(e=>m[e]!==t[e])})(t)&&(m=t,r(d,u),function(t={}){const e={width:d.offsetWidth,height:d.offsetHeight};i.datasets.forEach(({key:n,color:o,values:a})=>{const r=t[`opacity#${n}`],s=0===t.yMinFiltered&&2===i.datasets.length&&function(t,e){if(t.filter){const n=t[`opacity#${e}`],o=Object.values(t.filter).filter(t=>!0===t).length,i=t.filter[e],a=i?o>1:o>0;return n<1&&a}return!1}(t,n),c={xOffset:0,xWidth:i.xLabels.length,yMin:s?i.yMin:t.yMinFiltered,yMax:s?i.yMax:t.yMaxFiltered},l=O(c,e,{yPadding:1}),d={color:o,opacity:r,lineWidth:1};D(u,a,l,d,{},S)})}(t))}}}(m,g,z),N=function(t,e,n){const o=t,s=e,c=n;let l,d,u,h,f,g,m;const p=I(M);function y(t){m=t.type.startsWith("touch")?t.touches[0].pageX-t.touches[0].target.getBoundingClientRect().left:t.offsetX,p()}function v(t){t&&t.preventDefault(),m=null,r(h,f),g.classList.remove("shown")}function M(){if(!m||!l)return;const t=m,e=l,{findClosesLabelIndex:n,toPixels:o}=d,a=n(t);if(a<0||a>=s.xLabels.length)return;r(h,f);const{xPx:u}=o(a,0);!function(t,e,n){f.strokeStyle=n,f.lineWidth=1,f.beginPath(),f.moveTo(t,0),f.lineTo(t,e),f.stroke()}(u,c.height-x,J(e,"tooltipTail"));const p=s.datasets.filter(({key:t})=>e.filter[t]).map(({name:t,color:e,values:n})=>({name:t,color:e,value:n[a]}));p.forEach(({value:t,color:n})=>{!function({xPx:t,yPx:e},n,o){f.strokeStyle=n,f.fillStyle=o,f.lineWidth=2,f.beginPath(),f.arc(t,e,4,0,2*Math.PI),f.fill(),f.stroke()}(o(a,t),n,J(e,"bg"))}),function(t,e,n){const o=s.xLabels[n],a=new Date(o.value);g.children[0].innerHTML=`${k[a.getDay()]}, ${o.text}`,g.children[1].innerHTML=t.map(({name:t,color:e,value:n})=>`<div class="dataset" style="color: ${e}"><div>${B(n,2)}</div><div>${t}</div></div>`).join("");const r=Math.max(P+i,Math.min(e,c.width-(g.offsetWidth+i)+P));g.style.left=`${r}px`,g.classList.add("shown")}(p,u,a)}return(u=document.createElement("div")).className="tooltip",function(){const{canvas:t,context:e}=a(u,c);h=t,f=e}(),(g=document.createElement("div")).className="balloon",g.innerHTML='<div class="title"></div><div class="legend"></div>',u.appendChild(g),u.addEventListener("mousemove",y),u.addEventListener("touchmove",y),u.addEventListener("touchstart",y),u.addEventListener("mouseout",v),u.addEventListener("mouseup",v),u.addEventListener("touchend",v),u.addEventListener("touchcancel",v),o.appendChild(u),{update:function(t,e){l=t,d=e,M()}}}(m,g,q()),function(t,e,n){const o=t,i=e,a=n;let r;function s(t){t&&(t.preventDefault(),t.currentTarget.classList.toggle("checked"));const e={};Array.from(r.getElementsByTagName("a")).forEach(t=>{e[t.dataset.key]=t.classList.contains("checked")}),a(e)}(r=document.createElement("div")).className="tools",i.datasets.forEach(({key:t,name:e,color:n})=>{const o=document.createElement("a");o.href="#",o.dataset.key=t,o.className="checkbox checked",o.innerHTML=`<span class="circle"></span><span class="label">${e}</span>`,o.firstChild.style.borderColor=n,o.addEventListener("click",s),r.appendChild(o)}),o.appendChild(r),s()}(m,g,K),{redraw:function(){C.update()}}}};const i=1;function a(t,{width:e,height:n}){const o=document.createElement("canvas");o.width=e*E,o.height=n*E,o.style.width="100%",o.style.height=`${n}px`;const i=o.getContext("2d");return i.scale(E,E),t.appendChild(o),{canvas:o,context:i}}function r(t,e){e.clearRect(0,0,t.width,t.height)}const s="x",c={begin:.333,end:.667},l=.9,d=10,u=2,h=10,f=10,g="300 10px Helvetica, Arial, sans-serif",m=45,p=50,x=30,y=1,v=40,M=10,b=5,L='<div class="mask"></div><div class="slider"><div></div><div></div></div><div class="mask"></div>',E=window.devicePixelRatio||1,w=864e5,$=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],k=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],P=20,T=300,C={day:{bg:[255,255,255],axesText:[150,162,170],yAxisRulers:[242,244,245],tooltipTail:[223,230,235]},night:{bg:[36,47,62],axesText:[84,103,120],yAxisRulers:[41,53,68],tooltipTail:[59,74,90]}},A=["yMax","yMin","xAxisScale","yAxisScale","yMaxFiltered","yMinFiltered",...j(Object.keys(C.day).map(t=>["R","G","B"].map(e=>`colorChannels#${t}#${e}`)))],W=100,F=2,S=1;function O(t,e,{xPadding:n=0,yPadding:o=0}={}){let i=e.width;0===t.begin&&(i-=n),1===t.end&&(i-=n);const a=i/t.xWidth;let r=t.xOffset*a;0===t.begin&&(r-=n);const s=(e.height-o)/(t.yMax-t.yMin),c=t.yMin*s;return{toPixels:(t,n)=>({xPx:t*a-r,yPx:e.height-(n*s-c)}),findClosesLabelIndex:t=>Math.round((t+r)/a)}}function D(t,e,n,o,i,a){const{from:r=0,to:s=e.length}=i||{};let c=[];for(let t=r;t<=s;t++){const{xPx:o,yPx:i}=n.toPixels(t,e[t]);c.push([o,i])}if(c.length>=W){c=q(c)(a).points}t.save(),t.strokeStyle=o.color,t.lineWidth=o.lineWidth,t.globalAlpha=o.opacity,t.lineJoin="round",t.beginPath(),c.forEach(([e,n],o)=>{0===o?t.moveTo(e,n):t.lineTo(e,n)}),t.stroke(),t.restore()}function X(t){const e=t.length;let n=t[0],o=t[0];for(let i=0;i<e;i++){const e=t[i];e>n?n=e:e<o&&(o=e)}return{max:n,min:o}}function j(t){return[].concat.apply([],t)}function I(t){let e=!1;return function(){e||(e=!0,requestAnimationFrame(()=>{e=!1,t()}))}}function R(t){return t-t%w}function B(t,e=1){return t>=1e6?N(t/1e6,e)+"M":t>=1e3?N(t/1e3,e)+"K":t}function N(t,e){return t.toFixed(e).replace(/(\d{3,})\.\d+/,"$1").replace(/\.0+$/,"")}function H(t,e){let n=null;function o(o){o.target===t&&(o.preventDefault(),n=o,"mousedown"===o.type?(document.addEventListener("mousemove",a),document.addEventListener("mouseup",i)):"touchstart"===o.type&&(document.addEventListener("touchmove",a),document.addEventListener("touchend",i),document.addEventListener("touchcancel",i),void 0===o.pageX&&(o.pageX=o.touches[0].pageX)),e.draggingCursor&&document.body.classList.add(`cursor-${e.draggingCursor}`),e.onCapture&&e.onCapture(o))}function i(){n&&(e.draggingCursor&&document.body.classList.remove(`cursor-${e.draggingCursor}`),document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",a),document.removeEventListener("touchcancel",i),document.removeEventListener("touchend",i),document.removeEventListener("touchmove",a),n=null)}function a(t){n&&("touchmove"===t.type&&void 0===t.pageX&&(t.pageX=t.touches[0].pageX),e.onDrag(t,n,{dragOffsetX:t.pageX-n.pageX}))}t.addEventListener("mousedown",o),t.addEventListener("touchstart",o)}const q=(()=>{let t=1/Math.pow(2,22),e=1e5;function n(t,e,n,o,i){let a,r=+e[0],s=+e[1];(a=+((t[0]-r)*o[0]+(t[1]-s)*o[1])*i)>1?(r=+n[0],s=+n[1]):a>0&&(r+=+o[0]*a,s+=+o[1]*a);let c=+t[0]-r,l=+t[1]-s;return+c*c+l*l}return function(o,i,a){if(o.length<6)return function(){return{points:o,indexes:i,removed:[]}};let r=function(o,i){let a,r=o.length,s=[],c=[];for(let t=0,e=o.length;t<e;++t)s[t]=0;i||(i=[]);let l=0;for(let t=0,n=i.length;t<n;++t)s[i[t]]=e;function d(){let r=c.pop(),l=function(r){let l=r.start,d=r.end,u=r.record,h=r.currentLimit,f=0;if(!u){let a=-1,r=[o[d][0]-o[l][0],o[d][1]-o[l][1]];for(let t=0,n=i.length;t<n;++t){let n=i[t];if(n>l){if(n<d){a=n,f=e;break}break}}if(a<0){if(Math.abs(r[0])>t||Math.abs(r[1])>t){let t=r[0]*r[0]+r[1]*r[1],e=1/t;for(let t=l+1;t<d;++t){let i=n(o[t],o[l],o[d],r,e);i>f&&(a=t,f=i)}}else a=Math.round(.5*(l+d)),f=h;s[a]=f}u={start:l,end:d,index:a,distance:f}}return u.index&&u.distance>a&&(u.index-l>=2&&c.push({start:l,end:u.index,record:u.left,currentLimit:u.distance,parent:u,parentProperty:"left"}),d-u.index>=2&&c.push({start:u.index,end:d,record:u.right,currentLimit:u.distance,parent:u,parentProperty:"right"})),u}(r);return r.parent&&r.parentProperty&&(r.parent[r.parentProperty]=l),l}return function(t){for(a=t,c.push({start:0,end:r-1,record:l,currentLimit:e}),l=d();c.length;)d();return s}}(o,a);return function(t){let e=[],n=[],a=[],s=t*t,c=r(s);for(let t=0,r=o.length;t<r;t++)c[t]>=s||0==t||t==r-1?(e.push(o[t]),n.push(i?i[t]:t)):a.push(t);return{points:e,indexes:n,removed:a}}}})();function J(t,e,n=1){return function([t,e,n],o=1){return`rgba(${t}, ${e}, ${n}, ${o})`}(function(t,e){return["R","G","B"].map(n=>Math.round(t[`colorChannels#${e}#${n}`]))}(t,e),n)}}();