parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"iJA9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ANIMATE_PROPS=exports.SIMPLIFIER_MINIMAP_FACTOR=exports.SIMPLIFIER_PLOT_FACTOR=exports.SIMPLIFIER_MIN_POINTS=exports.SPEED_TEST_FAST_FPS=exports.SPEED_TEST_INTERVAL=exports.MILISECONDS_IN_DAY=exports.WEEK_DAYS_SHORT=exports.WEEK_DAYS=exports.MONTHS_SHORT=exports.MONTHS=exports.ZOOM_RANGE_MIDDLE=exports.ZOOM_RANGE_DELTA=exports.ZOOM_TIMEOUT=exports.MINIMAP_MAX_ANIMATED_DATASETS=exports.MINIMAP_EAR_WIDTH=exports.MINIMAP_LINE_WIDTH=exports.MINIMAP_MARGIN=exports.MINIMAP_HEIGHT=exports.Y_AXIS_ZERO_BASED_THRESHOLD=exports.X_AXIS_SHIFT_START=exports.X_AXIS_HEIGHT=exports.AXES_MAX_ROW_HEIGHT=exports.AXES_MAX_COLUMN_WIDTH=exports.AXES_FONT=exports.BALLOON_OFFSET=exports.PLOT_BARS_WIDTH_SHIFT=exports.PLOT_PIE_SHIFT=exports.PLOT_PIE_RADIUS_FACTOR=exports.PLOT_LINE_WIDTH=exports.PLOT_TOP_PADDING=exports.PLOT_HEIGHT=exports.GUTTER=exports.LONG_PRESS_TIMEOUT=exports.TRANSITION_DEFAULT_DURATION=exports.DEFAULT_RANGE=exports.DPR=void 0;const _=window.devicePixelRatio||1;exports.DPR=_;const o={begin:.8,end:1};exports.DEFAULT_RANGE=o;const e=300;exports.TRANSITION_DEFAULT_DURATION=300;const t=500;exports.LONG_PRESS_TIMEOUT=500;const s=10;exports.GUTTER=10;const I=320;exports.PLOT_HEIGHT=320;const T=15;exports.PLOT_TOP_PADDING=15;const r=2;exports.PLOT_LINE_WIDTH=2;const A=.45;exports.PLOT_PIE_RADIUS_FACTOR=.45;const S=10;exports.PLOT_PIE_SHIFT=10;const E=.5;exports.PLOT_BARS_WIDTH_SHIFT=.5;const p=20;exports.BALLOON_OFFSET=20;const x="300 10px Helvetica, Arial, sans-serif";exports.AXES_FONT=x;const M=45;exports.AXES_MAX_COLUMN_WIDTH=45;const O=50;exports.AXES_MAX_ROW_HEIGHT=50;const n=30;exports.X_AXIS_HEIGHT=30;const N=1;exports.X_AXIS_SHIFT_START=1;const P=.1;exports.Y_AXIS_ZERO_BASED_THRESHOLD=.1;const c=40;exports.MINIMAP_HEIGHT=40;const R=10;exports.MINIMAP_MARGIN=10;const D=1;exports.MINIMAP_LINE_WIDTH=1;const L=8;exports.MINIMAP_EAR_WIDTH=8;const H=4;exports.MINIMAP_MAX_ANIMATED_DATASETS=4;const a=300;exports.ZOOM_TIMEOUT=300;const F=.1;exports.ZOOM_RANGE_DELTA=.1;const i=.5;exports.ZOOM_RANGE_MIDDLE=.5;const d=["January","February","March","April","May","June","July","August","September","October","November","December"];exports.MONTHS=d;const y=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];exports.MONTHS_SHORT=y;const G=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];exports.WEEK_DAYS=G;const X=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];exports.WEEK_DAYS_SHORT=X;const u=864e5;exports.MILISECONDS_IN_DAY=864e5;const W=200;exports.SPEED_TEST_INTERVAL=200;const l=4;exports.SPEED_TEST_FAST_FPS=4;const U=1e3;exports.SIMPLIFIER_MIN_POINTS=1e3;const b=1;exports.SIMPLIFIER_PLOT_FACTOR=1;const C=.5;exports.SIMPLIFIER_MINIMAP_FACTOR=.5;const m=["begin 200 fast","end 200 fast","labelFromIndex 200 fast floor","labelToIndex 200 fast ceil","xAxisScale 400","yMinViewport","yMaxViewport","yMinViewportSecond","yMaxViewportSecond","yMinMinimap","yMaxMinimap","yMinMinimapSecond","yMaxMinimapSecond","yAxisScale","yAxisScaleSecond"];exports.ANIMATE_PROPS=m;
},{}],"qGqp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTransitionManager=e;var n=require("./constants");function t(n){return 1-Math.pow(1-n,1.675)}function e(e){const o={};let r=null,u=null,l=null,s=null,a=null,c=null;function i(n){delete o[n],f()||(cancelAnimationFrame(r),r=null)}function f(){return Boolean(Object.keys(o).length)}function m(t){return!(!t&&(c||a))&&(null===l||l>=n.SPEED_TEST_FAST_FPS)}function T(){const c=!m();!u||Date.now()-u>=n.SPEED_TEST_INTERVAL?(s&&(l=s,a||m(!0)||(a=Date.now())),u=Date.now(),s=0):s++;const d={};Object.keys(o).forEach(e=>{const{startedAt:r,from:u,to:l,duration:s=n.TRANSITION_DEFAULT_DURATION,options:a}=o[e],c=Math.min(1,(Date.now()-r)/s);let f=u+(l-u)*t(c);a.includes("ceil")?f=Math.ceil(f):a.includes("floor")&&(f=Math.floor(f)),o[e].current=f,o[e].progress=c,d[e]=f,1===c&&i(e)}),c||e(d),f()&&(r=requestAnimationFrame(T))}return{add:function(n,t,e,l,i){o[n]={from:t,to:e,duration:l,options:i,current:t,startedAt:Date.now(),progress:0},r||(u=null,s=null,a&&Date.now()-a>5e3&&(a=null),c=Boolean(a)||!m(!0),r=requestAnimationFrame(T))},remove:i,get:function(n){return o[n]},getState:function(){const n={};return Object.keys(o).forEach(t=>{const{current:e,from:r,to:u,progress:l}=o[t];n[t]=e,n[`${t}From`]=r,n[`${t}To`]=u,n[`${t}Progress`]=l}),n},isRunning:f,isFast:m}}
},{"./constants":"iJA9"}],"FO+Z":[function(require,module,exports) {
"use strict";function t(t){const e=t.length;let n=t[0],r=t[0];for(let o=0;o<e;o++){const e=t[o];e>n?n=e:e<r&&(r=e)}return{max:n,min:r}}function e(t){return[].concat.apply([],t)}function n(t){const e=[],n=t.length;for(let r=0,o=t[0].length;r<o;r++){e[r]=0;for(let o=0;o<n;o++)e[r]+=t[o][r]}return e}function r(t,e){return new Proxy({},{get:(n,r)=>void 0!==n[r]?n[r]:void 0!==e[r]?e[r]:t[r]})}function o(t,e,n=!0,r=!0){let o,u,i=!1;return function(...l){o=l,u=!0,i||(n&&(u=!1,t(...o)),i=!0,setTimeout(()=>{i=!1,r&&u&&t(...o)},e))}}function u(t){let e,n=!1;return function(...r){e=r,n||(n=!0,requestAnimationFrame(()=>{n=!1,t(...e)}))}}function i(t,e,n=!0,r=!0){let o=null;return function(){o?(clearTimeout(o),o=null):n&&t(),o=setTimeout(()=>{r&&t(),o=null},e)}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMaxMin=t,exports.mergeArrays=e,exports.sumArrays=n,exports.proxyMerge=r,exports.throttle=o,exports.throttleWithRaf=u,exports.debounce=i;
},{}],"UAP7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.xScaleLevelToStep=t,exports.xStepToScaleLevel=n,exports.yScaleLevelToStep=i,exports.yStepToScaleLevel=o,exports.applyYEdgeOpacity=a,exports.applyXEdgeOpacity=u,exports.getPieRadius=p,exports.getPieTextSize=c,exports.getPieTextShift=T,exports.isDataRange=s,exports.getSimplificationDelta=l;var e=require("./constants");function t(e){return Math.pow(2,e)}function n(e){return Math.ceil(Math.log2(e||1))}const r=[1,2,8,18,50,100,250,500,1e3,2500,5e3,1e4,25e3,5e4,1e5,25e4,5e5,1e6,25e5,5e6,1e7,25e6,5e7,1e8];function i(e){return r[e]||r[r.length-1]}function o(e){return r.findIndex(t=>t>=e)||r.length-1}function a(t,n,r){const i=Math.min(n+e.GUTTER,r-n);return i<=4*e.GUTTER&&(t=Math.min(1,t,i/(4*e.GUTTER))),t}function u(t,n){return n-e.GUTTER<=2*e.GUTTER?Math.min(1,t,(n-e.GUTTER)/(2*e.GUTTER)):t}function p(t){return Math.min(...t.getSize())*e.PLOT_PIE_RADIUS_FACTOR}function c(e,t){return(t+150*e)/8}function T(e,t,n){return e>=.99?0:Math.min(1-Math.log(30*e)/5,.8)*t}function s(t,n){return Math.abs(n.value-t.value)>e.MILISECONDS_IN_DAY}function l(t){return t>=e.SIMPLIFIER_MIN_POINTS?Math.min(t/1e3,1):0}
},{"./constants":"iJA9"}],"jzbJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStateManager=a;var e=require("./TransitionManager"),t=require("./utils"),i=require("./constants"),n=require("./formulas");function a(n,a,r){const s={begin:0,end:1},c=function(){const e={};return n.datasets.forEach(({key:t})=>{e[t]=!0}),e}(),M=function(){const e=[],a=n.datasets.map(({key:e})=>`opacity#${e} 300`);return(0,t.mergeArrays)([i.ANIMATE_PROPS,a]).forEach(t=>{const[i,n,...a]=t.split(" ");e.push({prop:i,duration:n,options:a})}),e}(),p=(0,e.createTransitionManager)(u),y=(0,t.throttleWithRaf)(u);let l={};function u(){const e=p.isFast()?(0,t.proxyMerge)(l,p.getState()):l;e.static=l,r(e)}return{update:function({range:e={},filter:t={},focusOn:i,minimapDelta:r}={},u){Object.assign(s,e),Object.assign(c,t);const m=l;l=o(n,a,s,c,i,r,m),u||M.forEach(({prop:e,duration:t,options:i})=>{const n=p.get(e),a=n?n.to:m[e];if(void 0!==a&&a!==l[e]){const a=n?i.includes("fast")?m[e]:n.current:m[e];n&&p.remove(e),p.add(e,a,l[e],t,i)}}),p.isRunning()&&p.isFast()||y()},hasAnimations:function(){return p.isFast()}}}function o(e,t,i,a,o,s,y){const{begin:l,end:u}=i,m=e.xLabels.length-1,x=Math.max(0,Math.ceil(m*l)),d=Math.min(Math.floor(m*u),m),S=M(t.width,x,d),f=e.isStacked?c(e,a,x,d,y):r(e,a,x,d,y),g=p(t.height,f.yMinViewport,f.yMaxViewport),h=e.hasSecondYAxis&&p(t.height,f.yMinViewportSecond,f.yMaxViewportSecond),A=(0,n.yScaleLevelToStep)(g);if(f.yMinViewport-=f.yMinViewport%A,h){const e=(0,n.yScaleLevelToStep)(h);f.yMinViewportSecond-=f.yMinViewportSecond%e}const w={};return e.datasets.forEach(({key:e})=>{w[`opacity#${e}`]=a[e]?1:0}),Object.assign({totalXWidth:m,xAxisScale:S,yAxisScale:g,yAxisScaleSecond:h,labelFromIndex:Math.max(0,x-1),labelToIndex:Math.min(d+1,m),filter:Object.assign({},a),focusOn:void 0!==o?o:y.focusOn,minimapDelta:void 0!==s?s:y.minimapDelta},f,w,i)}function r(e,t,i,n,a){const o=e.hasSecondYAxis&&e.datasets.slice(-1)[0],r=e.datasets.filter(e=>t[e.key]&&e!==o),c=s(e,i,n,a,r);if(o){t[o.key];const{yMinViewport:r,yMaxViewport:M,yMinMinimap:p,yMaxMinimap:y}=s(e,i,n,a,[o]);Object.assign(c,{yMinViewportSecond:r,yMaxViewportSecond:M,yMinMinimapSecond:p,yMaxMinimapSecond:y})}return c}function s(e,n,a,o,r){const{min:s=o.yMinMinimap,max:c=o.yMaxMinimap}=(0,t.getMaxMin)((0,t.mergeArrays)(r.map(({yMax:e,yMin:t})=>[e,t]))),M=s/c>i.Y_AXIS_ZERO_BASED_THRESHOLD?s:0;let p,y;if(0===n&&a===e.xLabels.length-1)p=M,y=c;else{const e=r.map(({values:e})=>e).map(e=>e.slice(n,a+1)),s=(0,t.getMaxMin)((0,t.mergeArrays)(e)),c=void 0!==s.min?s.min:o.yMinViewport;p=c/(y=void 0!==s.max?s.max:o.yMaxViewport)>i.Y_AXIS_ZERO_BASED_THRESHOLD?c:0}return{yMinViewport:p,yMaxViewport:y,yMinMinimap:M,yMaxMinimap:c}}function c(e,i,n,a,o){const r=e.datasets.filter(e=>i[e.key]).map(({values:e})=>e),s=r.length?(0,t.sumArrays)(r):[],{max:c=o.yMaxMinimap}=(0,t.getMaxMin)(s),{max:M=o.yMaxViewport}=(0,t.getMaxMin)(s.slice(n,a+1));return{yMinViewport:0,yMaxViewport:M,yMinMinimap:0,yMaxMinimap:c}}function M(e,t,a){const o=a-t,r=Math.floor(e/i.AXES_MAX_COLUMN_WIDTH);return(0,n.xStepToScaleLevel)(o/r)}function p(e,t,a){const o=e-i.X_AXIS_HEIGHT,r=a-t,s=Math.floor(o/i.AXES_MAX_ROW_HEIGHT);return(0,n.yStepToScaleLevel)(r/s)}
},{"./TransitionManager":"qGqp","./utils":"FO+Z","./constants":"iJA9","./formulas":"UAP7"}],"tnAp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addEventListener=t,exports.removeEventListener=n,exports.createElement=void 0;const e=(e="div")=>document.createElement(e);function t(e,t,n){e.addEventListener(t,n)}function n(e,t,n){e.removeEventListener(t,n)}exports.createElement=e;
},{}],"J6mi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.toggleText=e;var t=require("./minifiers");function e(e,s,l="",i=!1){const r=e.parentNode;r.classList.add("lovely-chart--transition-container");const n=(0,t.createElement)(e.tagName);n.className=`${l} lovely-chart--transition lovely-chart--position-${i?"top":"bottom"} lovely-chart--state-hidden`,n.innerHTML=s;const c=l.length?`.${l.split(" ").join(".")}`:"";return r.querySelectorAll(`${c}.lovely-chart--state-hidden`).forEach(t=>t.remove()),e.classList.add("lovely-chart--transition"),e.classList.remove("lovely-chart--position-bottom","lovely-chart--position-top"),e.classList.add(i?"lovely-chart--position-bottom":"lovely-chart--position-top"),r.insertBefore(n,e.nextSibling),a(n),o(e),n}function a(t){t.classList.remove("lovely-chart--state-animated"),t.classList.add("lovely-chart--state-animated"),t.classList.remove("lovely-chart--state-hidden")}function o(t){t.classList.remove("lovely-chart--state-animated"),t.classList.add("lovely-chart--state-animated"),t.classList.add("lovely-chart--state-hidden")}
},{"./minifiers":"tnAp"}],"2iNX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createHeader=l;var e=require("./minifiers"),t=require("./toggleText"),r=require("./utils");function l(l,o,a){let i,n,c,h;const d=(0,r.throttle)(s,400,!1,!0);function s(e){h.innerHTML?h.innerHTML!==e&&(h=(0,t.toggleText)(h,e,"lovely-chart--header-caption lovely-chart--position-right")):h.innerHTML=e}function p(){n=(0,t.toggleText)(c,o,"lovely-chart--header-title",!0),a()}return(i=(0,e.createElement)()).className="lovely-chart--header",(n=(0,e.createElement)()).className="lovely-chart--header-title",n.innerHTML=o,i.appendChild(n),(h=(0,e.createElement)()).className="lovely-chart--header-caption lovely-chart--position-right",i.appendChild(h),l.appendChild(i),{setCaption:d,zoom:function(r){c=(0,t.toggleText)(n,"Zoom Out","lovely-chart--header-title lovely-chart--header-zoom-out-control"),(0,e.addEventListener)(c,"click",p),s(r)}}}
},{"./minifiers":"tnAp","./toggleText":"J6mi","./utils":"FO+Z"}],"6YgZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildDayLabels=t,exports.buildTimeLabels=r,exports.humanize=n,exports.formatInteger=u,exports.getFullLabelDate=s,exports.getLabelDate=o;var e=require("./constants");function t(t){return t.map(t=>{const r=new Date(t);return{value:t,text:`${r.getDate()} ${e.MONTHS_SHORT[r.getMonth()]}`}})}function r(e){return e.map(e=>{const t=new Date(e),r=t.getUTCHours(),n=t.getUTCMinutes();return{value:e,text:`${r<10?"0":""}${r}:${n<10?"0":""}${n}`}})}function n(e,t=1){return e>=1e6?a(e/1e6,t)+"M":e>=1e3?a(e/1e3,t)+"K":e}function a(e,t){return e.toFixed(t).replace(/(\d{3,})\.\d+/,"$1").replace(/\.0+$/,"")}function u(e){return String(e).replace(/\d(?=(\d{3})+$)/g,"$& ")}function s(e,{isShort:t=!1}={}){return o(e,{isShort:t,displayWeekDay:!0})}function o(t,{isShort:r=!1,displayWeekDay:n=!1,displayYear:a=!0,displayHours:u=!1}={}){const{value:s}=t,o=new Date(s),i=r?e.MONTHS_SHORT:e.MONTHS,l=r?e.WEEK_DAYS_SHORT:e.WEEK_DAYS;let c=`${o.getUTCDate()} ${i[o.getUTCMonth()]}`;return n&&(c=`${l[o.getUTCDay()]}, `+c),a&&(c+=` ${o.getUTCFullYear()}`),u&&(c+=`, ${("0"+o.getUTCHours()).slice(-2)}:${("0"+o.getUTCMinutes()).slice(-2)}`),c}
},{"./constants":"iJA9"}],"Zr5j":[function(require,module,exports) {
"use strict";function t(){return document.documentElement.classList.contains("dark")?"skin-night":"skin-day"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.createColors=s,exports.getCssColor=c;let e=t();const o={"skin-day":{background:"#FFFFFF","text-color":"#222222","minimap-mask":"#E2EEF9/0.6","minimap-slider":"#C0D1E1","grid-lines":"#182D3B/0.1","zoom-out-text":"#108BE3","tooltip-background":"#FFFFFF","tooltip-arrow":"#D2D5D7",mask:"#FFFFFF/0.5","x-axis-text":"#252529/0.6","y-axis-text":"#252529/0.6"},"skin-night":{background:"#242F3E","text-color":"#FFFFFF","minimap-mask":"#304259/0.6","minimap-slider":"#56626D","grid-lines":"#FFFFFF/0.1","zoom-out-text":"#48AAF0","tooltip-background":"#1c2533","tooltip-arrow":"#D2D5D7",mask:"#242F3E/0.5","x-axis-text":"#A3B1C2/0.6","y-axis-text":"#A3B1C2/0.6"}},n=document.createElement("style");n.type="text/css",n.appendChild(document.createTextNode("")),document.head.appendChild(n);const r=n.sheet;function s(t){const e={},n=".lovely-chart--color";return["skin-day","skin-night"].forEach(s=>{e[s]={},Object.keys(o[s]).forEach(t=>{e[s][t]=a(o[s][t])}),Object.keys(t).forEach(o=>{e[s][`dataset#${o}`]=a(t[o]),l(r,`.lovely-chart--tooltip-dataset-value${n}-${t[o].slice(1)}`,`color: ${t[o]}`),l(r,`.lovely-chart--button${n}-${t[o].slice(1)}`,`border-color: ${t[o]}; color: ${t[o]}`),l(r,`.lovely-chart--button.lovely-chart--state-checked${n}-${t[o].slice(1)}`,`background-color: ${t[o]}`)})}),e}function c(t,o,n){return i(t[e][o],n)}function a(t){const[e,o]=t.replace("#","").split("/");return[parseInt(e.slice(0,2),16),parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16),o?parseFloat(o):1]}function i([t,e,o,n=1],r=1){return`rgba(${t}, ${e}, ${o}, ${n*r})`}function l(t,e,o){t.insertRule(`${e} { ${o} }`,t.cssRules.length)}document.documentElement.addEventListener("darkmode",()=>{e=t()});
},{}],"v+PH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createProjection=e,exports.toPixels=n;var t=require("./utils");function e(n){const{begin:r,end:a,totalXWidth:i,yMin:o,yMax:u,availableWidth:c,availableHeight:s,xPadding:f=0,yPadding:l=0}=n;let x=c;0===r&&(x-=f),1===a&&(x-=f);const d=x/((a-r)*i);let g=r*i*d;0===r&&(g-=f);const y=s-l,P=y/(u-o),b=o*P;return{findClosestLabelIndex:function(t){return Math.round((t+g)/d)},copy:function(r,a){return e((0,t.proxyMerge)(n,r),a)},getCenter:function(){return[c/2,s-y/2]},getSize:function(){return[c,y]},getParams:function(){return n},getState:function(){return{xFactor:d,xOffsetPx:g,availableHeight:s,yFactor:P,yOffsetPx:b}}}}function n(t,e,n){const{xFactor:r,xOffsetPx:a,availableHeight:i,yFactor:o,yOffsetPx:u}=t.getState();return[e*r-a,i-(n*o-u)]}
},{"./utils":"FO+Z"}],"ysRd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAxes=r;var e=require("./constants"),t=require("./format"),o=require("./skin"),i=require("./formulas"),l=require("./Projection");function r(r,s,n,a){function T(s,T,d,c,x,S=1,y=null,f=!1){const h=(0,i.yScaleLevelToStep)(d),A=Math.ceil(c/h)*h,g=Math.floor(x/h)*h;r.font=e.AXES_FONT,r.textAlign=f?"right":"left",r.textBaseline="bottom",r.lineWidth=1,r.beginPath();for(let p=A;p<=g;p+=h){const[,s]=(0,l.toPixels)(T,0,p),d=(0,i.applyXEdgeOpacity)(S,s);r.fillStyle=y?(0,o.getCssColor)(a,y,d):(0,o.getCssColor)(a,"y-axis-text",d),f?r.fillText((0,t.humanize)(p),n.width-e.GUTTER,s-e.GUTTER/2):r.fillText((0,t.humanize)(p),e.GUTTER,s-e.GUTTER/2),f?(r.strokeStyle=(0,o.getCssColor)(a,y,S),r.moveTo(n.width-e.GUTTER,s),r.lineTo(n.width-2*e.GUTTER,s)):(r.moveTo(e.GUTTER,s),r.strokeStyle=(0,o.getCssColor)(a,"grid-lines",S),r.lineTo(n.width-e.GUTTER,s))}r.stroke()}return{drawXAxis:function(t,T){r.clearRect(0,n.height-e.X_AXIS_HEIGHT+1,n.width,e.X_AXIS_HEIGHT+1);const d=n.height-e.X_AXIS_HEIGHT/2,c=Math.floor(t.xAxisScale),x=(0,i.xScaleLevelToStep)(c),S=1-(t.xAxisScale-c);r.font=e.AXES_FONT,r.textAlign="center",r.textBaseline="middle";for(let y=t.labelFromIndex;y<=t.labelToIndex;y++){const t=y-e.X_AXIS_SHIFT_START;if(t%x!=0)continue;const c=s.xLabels[y],[f]=(0,l.toPixels)(T,y,0);let h=t%(2*x)==0?1:S;h=(0,i.applyYEdgeOpacity)(h,f,n.width),r.fillStyle=(0,o.getCssColor)(a,"x-axis-text",h),r.fillText(c.text,f,d)}},drawYAxis:function(t,i,l){const{yAxisScale:d,yAxisScaleFrom:c,yAxisScaleTo:x,yAxisScaleProgress:S=0,yMinViewport:y,yMinViewportFrom:f,yMinViewportTo:h,yMaxViewport:A,yMaxViewportFrom:g,yMaxViewportTo:p,yMinViewportSecond:u,yMinViewportSecondFrom:w,yMinViewportSecondTo:E,yMaxViewportSecond:M,yMaxViewportSecondFrom:v,yMaxViewportSecondTo:m}=t,G=l&&`dataset#${s.datasets[0].key}`,_=void 0!==f||void 0!==g;if(s.isPercentage?function(t){const[,i]=t.getSize();r.font=e.AXES_FONT,r.textAlign="left",r.textBaseline="bottom",r.lineWidth=1,r.beginPath(),[0,.25,.5,.75,1].forEach(t=>{const l=i-i*t+e.PLOT_TOP_PADDING;r.fillStyle=(0,o.getCssColor)(a,"y-axis-text",1),r.fillText(`${100*t}%`,e.GUTTER,l-e.GUTTER/4),r.moveTo(e.GUTTER,l),r.strokeStyle=(0,o.getCssColor)(a,"grid-lines",1),r.lineTo(n.width-e.GUTTER,l)}),r.stroke()}(i):T(0,i,Math.round(x||d),void 0!==h?h:y,void 0!==p?p:A,c?S:1,G),S>0&&_&&T(0,i,Math.round(c),void 0!==f?f:y,void 0!==g?g:A,1-S,G),l){const{yAxisScaleSecond:e,yAxisScaleSecondFrom:o,yAxisScaleSecondTo:i,yAxisScaleSecondProgress:r=0}=t,n=`dataset#${s.datasets[s.datasets.length-1].key}`,a=void 0!==w||void 0!==v;T(0,l,Math.round(i||e),void 0!==E?E:u,void 0!==m?m:M,o?r:1,n,!0),r>0&&a&&T(0,l,Math.round(o),void 0!==w?w:u,void 0!==v?v:M,1-r,n,!0)}}}}
},{"./constants":"iJA9","./format":"6YgZ","./skin":"Zr5j","./formulas":"UAP7","./Projection":"v+PH"}],"Dryx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setupCanvas=n,exports.clearCanvas=s;var e=require("./constants"),t=require("./minifiers");function n(n,{width:s,height:i}){const r=(0,t.createElement)("canvas");r.width=s*e.DPR,r.height=i*e.DPR,r.style.width="100%",r.style.height=`${i}px`;const a=r.getContext("2d");return a.scale(e.DPR,e.DPR),n.appendChild(r),{canvas:r,context:a}}function s(e,t){t.clearRect(0,0,e.width,e.height)}
},{"./constants":"iJA9","./minifiers":"tnAp"}],"uXfe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.preparePoints=t;var e=require("./utils");function t(e,t,a,c,u,n){let l=t.map(({values:e})=>e.slice(a.from,a.to+1));e.isPie&&!n&&(l=i(l));const o=l.map((t,r)=>t.map((t,s)=>{let i=t;return e.isStacked&&(i*=c[r]),{labelIndex:a.from+s,value:t,visibleValue:i,stackOffset:0,stackValue:i}}));return e.isPercentage&&r(o,u),e.isStacked&&s(o),o}function a(t){return(0,e.sumArrays)(t.map(e=>e.map(({visibleValue:e})=>e)))}function r(e,t){const r=a(e);e.forEach(e=>{e.forEach((e,a)=>{e.percent=e.visibleValue/r[a],e.visibleValue=e.percent*t.yMax})})}function s(e){const t=[];e.forEach(e=>{e.forEach((e,a)=>{void 0===t[a]&&(t[a]=0),e.stackOffset=t[a],t[a]+=e.visibleValue,e.stackValue=t[a]})})}function i(e){return e.map(e=>[e.reduce((e,t)=>e+t,0)])}
},{"./utils":"FO+Z"}],"Tk0S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.simplify=void 0;const e=(()=>{let e=1/Math.pow(2,22),t=1e5;function r(e,t,r,n,i){let o,l=+t[0],u=+t[1];(o=+((e[0]-l)*n[0]+(e[1]-u)*n[1])*i)>1?(l=+r[0],u=+r[1]):o>0&&(l+=+n[0]*o,u+=+n[1]*o);let s=+e[0]-l,p=+e[1]-u;return+s*s+p*p}return function(n,i,o){if(n.length<6)return function(){return{points:n,indexes:i,removed:[]}};let l=function(n,i){let o,l=n.length,u=[],s=[];for(let e=0,t=n.length;e<t;++e)u[e]=0;i||(i=[]);let p=0;for(let e=0,r=i.length;e<r;++e)u[i[e]]=t;function d(){let l=s.pop(),p=function(l){let p=l.start,d=l.end,a=l.record,f=l.currentLimit,c=0;if(!a){let o=-1,l=[n[d][0]-n[p][0],n[d][1]-n[p][1]];for(let e=0,r=i.length;e<r;++e){let r=i[e];if(r>p){if(r<d){o=r,c=t;break}break}}if(o<0){if(Math.abs(l[0])>e||Math.abs(l[1])>e){let e=l[0]*l[0]+l[1]*l[1],t=1/e;for(let i=p+1;i<d;++i){let e=r(n[i],n[p],n[d],l,t);e>c&&(o=i,c=e)}}else o=Math.round(.5*(p+d)),c=f;u[o]=c}a={start:p,end:d,index:o,distance:c}}return a.index&&a.distance>o&&(a.index-p>=2&&s.push({start:p,end:a.index,record:a.left,currentLimit:a.distance,parent:a,parentProperty:"left"}),d-a.index>=2&&s.push({start:a.index,end:d,record:a.right,currentLimit:a.distance,parent:a,parentProperty:"right"})),a}(l);return l.parent&&l.parentProperty&&(l.parent[l.parentProperty]=p),p}return function(e){for(o=e,s.push({start:0,end:l-1,record:p,currentLimit:t}),p=d();s.length;)d();return u}}(n,o);return function(e){let t=[],r=[],o=[],u=e*e,s=l(u);for(let l=0,p=n.length;l<p;l++)s[l]>=u||0==l||l==p-1?(t.push(n[l]),r.push(i?i[l]:l)):o.push(l);return{points:t,indexes:r,removed:o}}}})();exports.simplify=e;
},{}],"sPQK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.drawDatasets=o;var e=require("./skin"),t=require("./utils"),i=require("./formulas"),l=require("./constants"),a=require("./simplify"),n=require("./Projection");function o(l,a,o,r,c,u,h,d,p,P,x,g,y){if(o.datasets.forEach(({key:f,type:b,hasOwnYAxis:m},I)=>{if(!P[I])return;const T={color:(0,e.getCssColor)(x,`dataset#${f}`),lineWidth:p,opacity:o.isStacked?1:P[I],simplification:y},S="pie"===b&&g?"bar":b;let k=m?h:c[I],W=m?d:u;if("area"===S){const{yMin:e,yMax:i}=u.getParams(),l=i-e,a=[{labelIndex:r.from,stackValue:0},{labelIndex:r.to,stackValue:0}],n=[{labelIndex:r.to,stackValue:l},{labelIndex:r.from,stackValue:l}];k=(0,t.mergeArrays)([c[I-1]||a,n])}if("pie"===S&&(T.center=u.getCenter(),T.radius=(0,i.getPieRadius)(u),T.pointerVector=a.focusOn),"bar"===S){const[e]=(0,n.toPixels)(u,0,0),[t]=(0,n.toPixels)(u,1,0);T.lineWidth=t-e,T.focusOn=a.focusOn}s(S,l,k,W,T)}),a.focusOn&&o.isBars){const[t]=(0,n.toPixels)(u,0,0),[i]=(0,n.toPixels)(u,1,0);f(l,u,{focusOn:a.focusOn,color:(0,e.getCssColor)(x,"mask"),lineWidth:i-t})}}function s(e,...t){switch(e){case"line":return r(...t);case"bar":return c(...t);case"area":return u(...t);case"pie":return h(...t)}}function r(e,t,i,l){e.beginPath();let o=[];for(let a=0,s=t.length;a<s;a++){const{labelIndex:e,stackValue:l}=t[a];o.push((0,n.toPixels)(i,e,l))}if(l.simplification){o=(0,a.simplify)(o)(l.simplification).points}o.forEach(([t,i])=>{e.lineTo(t,i)}),e.save(),e.strokeStyle=l.color,e.lineWidth=l.lineWidth,e.globalAlpha=l.opacity,e.lineJoin="bevel",e.lineCap="butt",e.stroke(),e.restore()}function c(e,t,i,a){const{yMin:o}=i.getParams();e.save(),e.globalAlpha=a.opacity,e.fillStyle=a.color;for(let s=0,r=t.length;s<r;s++){const{labelIndex:r,stackValue:c,stackOffset:f=0}=t[s],[,u]=(0,n.toPixels)(i,r,Math.max(f,o)),[h,d]=(0,n.toPixels)(i,r,c),p=h-a.lineWidth/2,P=d,x=1===a.opacity?a.lineWidth+l.PLOT_BARS_WIDTH_SHIFT:a.lineWidth+l.PLOT_BARS_WIDTH_SHIFT*a.opacity,g=u-d;e.fillRect(p,P,x,g)}e.restore()}function f(e,t,i){const[a,o]=t.getCenter(),[s,r]=t.getSize(),[c]=(0,n.toPixels)(t,i.focusOn,0);e.fillStyle=i.color,e.fillRect(a-s/2,o-r/2,c-i.lineWidth/2+l.PLOT_BARS_WIDTH_SHIFT,r),e.fillRect(c+i.lineWidth/2,o-r/2,s-(c+i.lineWidth/2),r)}function u(e,t,i,l){e.beginPath();let o=[];for(let a=0,s=t.length;a<s;a++){const{labelIndex:e,stackValue:l}=t[a];o.push((0,n.toPixels)(i,e,l))}if(l.simplification){o=(0,a.simplify)(o)(l.simplification).points}o.forEach(([t,i])=>{e.lineTo(t,i)}),e.save(),e.fillStyle=l.color,e.lineWidth=l.lineWidth,e.globalAlpha=l.opacity,e.lineJoin="bevel",e.lineCap="butt",e.fill(),e.restore()}function h(e,t,a,n){const{visibleValue:o,stackValue:s,stackOffset:r=0}=t[0];if(!o)return;const{yMin:c,yMax:f}=a.getParams(),u=1/(f-c),h=o*u,d=r*u*Math.PI*2-Math.PI/2,p=s*u*Math.PI*2-Math.PI/2,{radius:P=120,center:[x,g],pointerVector:y}=n,b=y&&d<=y.angle&&y.angle<p&&y.distance<=P?l.PLOT_PIE_SHIFT:0,m=(d+p)/2,I=Math.cos(m),T=Math.sin(m),S=I*b,k=T*b;e.save(),e.beginPath(),e.fillStyle=n.color,e.moveTo(x+S,g+k),e.arc(x+S,g+k,P,d,p),e.lineTo(x+S,g+k),e.fill(),e.font=`700 ${(0,i.getPieTextSize)(h,P)}px Helvetica, Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle="white";const W=(0,i.getPieTextShift)(h,P);e.fillText(`${Math.round(100*h)}%`,x+I*W+S,g+T*W+k),e.restore()}
},{"./skin":"Zr5j","./utils":"FO+Z","./formulas":"UAP7","./constants":"iJA9","./simplify":"Tk0S","./Projection":"v+PH"}],"qY6S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.captureEvents=n;var e=require("./minifiers"),t=require("./constants");function n(n,o){let u=null,r=null;function s(n){u=n,"mousedown"===n.type?((0,e.addEventListener)(document,"mousemove",d),(0,e.addEventListener)(document,"mouseup",c)):"touchstart"===n.type&&((0,e.addEventListener)(document,"touchmove",d),(0,e.addEventListener)(document,"touchend",c),(0,e.addEventListener)(document,"touchcancel",c),void 0===n.pageX&&(n.pageX=n.touches[0].pageX)),o.draggingCursor&&document.documentElement.classList.add(`cursor-${o.draggingCursor}`),o.onCapture&&o.onCapture(n),o.onLongPress&&(r=setTimeout(()=>o.onLongPress(),t.LONG_PRESS_TIMEOUT))}function c(t){u&&(r&&(clearTimeout(r),r=null),o.draggingCursor&&document.documentElement.classList.remove(`cursor-${o.draggingCursor}`),(0,e.removeEventListener)(document,"mouseup",c),(0,e.removeEventListener)(document,"mousemove",d),(0,e.removeEventListener)(document,"touchcancel",c),(0,e.removeEventListener)(document,"touchend",c),(0,e.removeEventListener)(document,"touchmove",d),u=null,o.onRelease&&o.onRelease(t))}function d(e){u&&(r&&(clearTimeout(r),r=null),"touchmove"===e.type&&void 0===e.pageX&&(e.pageX=e.touches[0].pageX),o.onDrag&&o.onDrag(e,u,{dragOffsetX:e.pageX-u.pageX}))}(0,e.addEventListener)(n,"mousedown",s),(0,e.addEventListener)(n,"touchstart",s)}
},{"./minifiers":"tnAp","./constants":"iJA9"}],"QCqL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMinimap=d;var e=require("./canvas"),t=require("./preparePoints"),i=require("./Projection"),n=require("./drawDatasets"),a=require("./captureEvents"),s=require("./constants"),r=require("./utils"),l=require("./minifiers"),o=require("./formulas");function d(d,c,h,p){let m,u,f,M,g,v,y,I,A={};const _=(0,r.throttleWithRaf)(function(){const{begin:e,end:t}=A;g.children[0].style.width=`${100*e}%`,g.children[1].style.width=`${100*(t-e)}%`,g.children[2].style.width=`${100*(1-t)}%`});function D(e){e.preventDefault(),y=e.target.offsetLeft}function E(){y=null}function P(e,t,{dragOffsetX:i}){const n=M.width-v.offsetWidth,a=Math.max(0,Math.min(y+i-s.MINIMAP_EAR_WIDTH,n)),r=a+v.offsetWidth;x({begin:a/M.width,end:r/M.width})}function w(e,t,{dragOffsetX:i}){const n=v.offsetLeft+v.offsetWidth-2*s.MINIMAP_EAR_WIDTH;x({begin:Math.min(n,Math.max(0,y+i))/M.width})}function b(e,t,{dragOffsetX:i}){const n=v.offsetLeft+2*s.MINIMAP_EAR_WIDTH,a=M.width;x({end:Math.max(n,Math.min(y+s.MINIMAP_EAR_WIDTH+i,a))/M.width})}function x(e,t){let i=Object.assign({},A,e);I&&I.minimapDelta&&!t&&(i=function(e){const t=Math.round(e.begin/I.minimapDelta)*I.minimapDelta,i=Math.round(e.end/I.minimapDelta)*I.minimapDelta;return{begin:t,end:i}}(i)),i.begin===A.begin&&i.end===A.end||(A=i,_(),t||p(A))}return(m=(0,l.createElement)()).className="lovely-chart--minimap",m.style.height=`${s.MINIMAP_HEIGHT}px`,function(){const{canvas:t,context:i}=(0,e.setupCanvas)(m,{width:d.offsetWidth-2*s.MINIMAP_MARGIN,height:s.MINIMAP_HEIGHT});u=t,f=i}(),(g=(0,l.createElement)()).className="lovely-chart--minimap-ruler",g.innerHTML='<div class="lovely-chart--minimap-mask"></div><div class="lovely-chart--minimap-slider"><div class="lovely-chart--minimap-slider-handle"><span class="lovely-chart--minimap-slider-handle-pin"></span></div><div class="lovely-chart--minimap-slider-inner"></div><div class="lovely-chart--minimap-slider-handle"><span class="lovely-chart--minimap-slider-handle-pin"></span></div></div><div class="lovely-chart--minimap-mask"></div>',v=g.children[1],(0,a.captureEvents)(v.children[1],{onCapture:D,onDrag:P,onRelease:E,draggingCursor:"grabbing"}),(0,a.captureEvents)(v.children[0],{onCapture:D,onDrag:w,onRelease:E,draggingCursor:"ew-resize"}),(0,a.captureEvents)(v.children[2],{onCapture:D,onDrag:b,onRelease:E,draggingCursor:"ew-resize"}),m.appendChild(g),d.appendChild(m),M={width:u.offsetWidth,height:u.offsetHeight},x(s.DEFAULT_RANGE),{update:function(a){const{begin:l,end:d}=a;y||x({begin:l,end:d},!0),c.datasets.length>=s.MINIMAP_MAX_ANIMATED_DATASETS&&(a=a.static),function(e){if(!I)return!0;const{datasets:t}=c;return!!t.some(({key:t})=>I[`opacity#${t}`]!==e[`opacity#${t}`])||I.yMaxMinimap!==e.yMaxMinimap}(a)&&(I=(0,r.proxyMerge)(a,{focusOn:null}),(0,e.clearCanvas)(u,f),function(e={}){const{datasets:a}=c,r={from:0,to:e.totalXWidth},l={begin:0,end:1,totalXWidth:e.totalXWidth,yMin:e.yMinMinimap,yMax:e.yMaxMinimap,availableWidth:M.width,availableHeight:M.height,yPadding:1},d=a.map(({key:e})=>I[`opacity#${e}`]),p=(0,t.preparePoints)(c,a,r,d,l,!0),m=(0,i.createProjection)(l);let u=null,g=null;if(c.hasSecondYAxis){const i=a.find(e=>e.hasOwnYAxis),n={yMin:e.yMinMinimapSecond,yMax:e.yMaxMinimapSecond};u=(0,t.preparePoints)(c,[i],r,d,n)[0],g=m.copy(n)}const v=p.reduce((e,t)=>e+t.length,0),y=(0,o.getSimplificationDelta)(v)*s.SIMPLIFIER_MINIMAP_FACTOR;(0,n.drawDatasets)(f,e,c,r,p,m,u,g,s.MINIMAP_LINE_WIDTH,d,h,!0,y)}(I))},toggle:function(e){m.classList.toggle("lovely-chart--state-hidden",!e),requestAnimationFrame(()=>{m.classList.toggle("lovely-chart--state-transparent",!e)})}}}
},{"./canvas":"Dryx","./preparePoints":"uXfe","./Projection":"v+PH","./drawDatasets":"sPQK","./captureEvents":"qY6S","./constants":"iJA9","./utils":"FO+Z","./minifiers":"tnAp","./formulas":"UAP7"}],"l6Ve":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTooltip=r;var e=require("./canvas"),t=require("./constants"),n=require("./formulas"),a=require("./format"),l=require("./skin"),o=require("./utils"),s=require("./minifiers"),i=require("./Projection");function r(r,c,u,d,h,v){let f,p,y,g,m,L,b,x,P,I,M,A=null,E=!1,T=!1;const q=(0,o.throttleWithRaf)(w),S=(0,o.throttle)(R,100,!0,!0);function k(e){if(e.target===P||P.contains(e.target)||A)return;T=!1;const t=L.getBoundingClientRect();I=(e.touches?e.touches[0].clientX:e.clientX)-t.left,M=(e.touches?e.touches[0].clientY:e.clientY)-t.top,q()}function C(e){null===I||e.target===L||L.contains(e.target)||F()}function $(e){if(T)return;const t=A;A=null,k(e);const n=O();n!==t&&(A=n)}function H(){if(P.classList.contains("lovely-chart--state-inactive"))return;const e=y.findClosestLabelIndex(I);h(e)}function F(t){I=null,A=null,(0,e.clearCanvas)(b,x),Y(),!t&&v&&v(null)}function O(){const e=y.findClosestLabelIndex(I);return e<f.labelFromIndex||e>f.labelToIndex?null:e}function w(o){if(!I||!f||T)return;const s=O();if(null===s)return void F(o);const r=_(),h=!c.isPie||r.distance<=(0,n.getPieRadius)(y);function L(e,t){return c.isPie?e.slice(f.labelFromIndex,f.labelToIndex+1).reduce((e,t)=>e+t,0):e[t]}!o&&v&&(c.isPie?v(r):v(s));const[A]=(0,i.toPixels)(y,s,0),q=c.datasets.map(({key:e,name:t,values:n,hasOwnYAxis:a},l)=>({key:e,name:t,value:L(n,s),hasOwnYAxis:a,originalIndex:l})).filter(({key:e})=>f.filter[e]);q.length&&h?function(e,l){P.style.transform=`translate3D(${function(e){const n=(f.labelFromIndex+f.labelToIndex)/2,{angle:a}=_();return(c.isPie?a>Math.PI/2:e<n)?I+t.BALLOON_OFFSET:I-(P.offsetWidth+t.BALLOON_OFFSET)}(l)}px, ${c.isPie?`${M}px`:0}, 0)`,P.classList.add("lovely-chart--state-shown"),c.isPie?R(null,e):S(function(e,t){if(E)return(0,n.isDataRange)(e.xLabels[f.labelFromIndex+1],e.xLabels[f.labelToIndex-1])?(0,a.getLabelDate)(e.xLabels[t],{isShort:!0,displayYear:!1,displayHours:!0}):e.xLabels[t].text;return(0,a.getFullLabelDate)(e.xLabels[t],{isShort:!0})}(c,l),e)}(q,s):Y(),(0,e.clearCanvas)(b,x),(c.isLines||c.isAreas)&&(c.isLines&&function(e,t){e.forEach(({value:e,key:n,hasOwnYAxis:a,originalIndex:o})=>{const s=t-f.labelFromIndex,r=a?g[s]:p[o][s];if(!r)return;const[c,u]=a?(0,i.toPixels)(m,t,r.stackValue):(0,i.toPixels)(y,t,r.stackValue);!function([e,t],n,a){x.strokeStyle=n,x.fillStyle=a,x.lineWidth=2,x.beginPath(),x.arc(e,t,4,0,2*Math.PI),x.fill(),x.stroke()}([c,u],(0,l.getCssColor)(d,`dataset#${n}`),(0,l.getCssColor)(d,"background"))})}(q,s),function(e,t,n){x.strokeStyle=n,x.lineWidth=1,x.beginPath(),x.moveTo(e,0),x.lineTo(e,t),x.stroke()}(A,u.height-t.X_AXIS_HEIGHT,(0,l.getCssColor)(d,"grid-lines")))}function N(e,t,n){if(!c.isPercentage)return;if(c.isPie)return void Array.from(e.querySelectorAll(".lovely-chart--percentage-title")).forEach(e=>e.remove());const a=Math.round(t/n*100),l=e.querySelector(".lovely-chart--percentage-title:not(.lovely-chart--state-hidden)");if(l)l.innerHTML=`${a}%`;else{const t=(0,s.createElement)("span");t.className="lovely-chart--percentage-title lovely-chart--position-left",t.innerHTML=`${a}%`,e.prepend(t)}}function B(e){const t=P.children[1];c.isPie&&t.classList.add("lovely-chart--tooltip-legend-pie"),Array.from(t.children).forEach(e=>{!c.isPie&&t.classList.contains("lovely-chart--tooltip-legend-pie")?e.remove():e.setAttribute("data-present","false")});const l=e.reduce((e,t)=>e+t.value,0),o=_();(c.isPie?e.filter(({value:t},a)=>(function(e,t,a,l,o){const s=l>0?e.slice(0,l).reduce((e,t)=>e+t.value,0):0,i=s/a*Math.PI*2-Math.PI/2,r=(s+t)/a*Math.PI*2-Math.PI/2;return o&&i<=o.angle&&o.angle<r&&o.distance<=(0,n.getPieRadius)(y)})(e,t,l,a,o)):e).forEach(e=>{const n=t.querySelector(`[data-name="${e.name}"]`);n?function(e,{key:t,value:n}={},l){e.setAttribute("data-present","true"),e.querySelector(`.lovely-chart--tooltip-dataset-value.lovely-chart--color-${c.colors[t].slice(1)}:not(.lovely-chart--state-hidden)`).innerHTML=(0,a.formatInteger)(n),N(e,n,l)}(n,e,l):function(e,{name:t,key:n,value:l},o){const i=`lovely-chart--tooltip-dataset-value lovely-chart--position-right lovely-chart--color-${c.colors[n].slice(1)}`,r=(0,s.createElement)();r.className="lovely-chart--tooltip-dataset",r.setAttribute("data-present","true"),r.setAttribute("data-name",t),r.innerHTML=`<span class="lovely-chart--dataset-title">${t}</span><span class="${i}">${(0,a.formatInteger)(l)}</span>`,N(r,l,o);const u=e.querySelector('[data-total="true"]');u?e.insertBefore(r,u):e.appendChild(r)}(t,e,l)}),c.isBars&&c.isStacked&&function(e,t){const n=e.querySelector('[data-total="true"]');if(n){n.setAttribute("data-present","true");const e=n.querySelector(".lovely-chart--tooltip-dataset-value:not(.lovely-chart--state-hidden)");e.innerHTML=t}else{const n=(0,s.createElement)();n.className="lovely-chart--tooltip-dataset",n.setAttribute("data-present","true"),n.setAttribute("data-total","true"),n.innerHTML=`<span>All</span><span class="lovely-chart--tooltip-dataset-value lovely-chart--position-right">${t}</span>`,e.appendChild(n)}}(t,(0,a.formatInteger)(l)),Array.from(t.querySelectorAll('[data-present="false"]')).forEach(e=>{e.remove()})}function R(e,t){!function(e){const t=P.children[0];if(c.isPie)t&&(t.style.display="none");else{"none"===t.style.display&&(t.style.display="");const n=t.querySelector(":not(.lovely-chart--state-hidden)");t.innerHTML&&n?n.innerHTML=e:t.innerHTML=`<span>${e}</span>`}}(e),B(t)}function Y(){P.classList.remove("lovely-chart--state-shown")}function _(){const{width:e,height:t}=L.getBoundingClientRect(),n=[e/2,t/2],a=Math.atan2(M-n[1],I-n[0]),l=Math.sqrt((I-n[0])**2+(M-n[1])**2);return{angle:a>=-Math.PI/2?a:2*Math.PI+a,distance:l}}return function(){(L=(0,s.createElement)()).className="lovely-chart--tooltip",function(){const{canvas:t,context:n}=(0,e.setupCanvas)(L,u);b=t,x=n}(),(P=(0,s.createElement)()).className=`lovely-chart--tooltip-balloon${c.isZoomable?"":" lovely-chart--state-inactive"}`,P.innerHTML='<div class="lovely-chart--tooltip-title"></div><div class="lovely-chart--tooltip-legend"></div><div class="lovely-chart--spinner"></div>',c.isZoomable&&(0,s.addEventListener)(P,"click",H),L.appendChild(P),"ontouchstart"in window?((0,s.addEventListener)(L,"touchmove",k),(0,s.addEventListener)(L,"touchstart",k),(0,s.addEventListener)(document,"touchstart",C)):((0,s.addEventListener)(L,"mousemove",k),(0,s.addEventListener)(L,"click",$),(0,s.addEventListener)(document,"mousemove",C));r.appendChild(L)}(),{update:function(e,t,n,a,l){f=e,p=t,y=n,g=a,m=l,w(!0)},toggleLoading:function(e){P.classList.toggle("lovely-chart--state-loading",e),e||F()},toggleIsZoomed:function(e){e!==E&&(T=!0),E=e,P.classList.toggle("lovely-chart--state-inactive",e)}}}
},{"./canvas":"Dryx","./constants":"iJA9","./formulas":"UAP7","./format":"6YgZ","./skin":"Zr5j","./utils":"FO+Z","./minifiers":"tnAp","./Projection":"v+PH"}],"2Uli":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTools=a;var e=require("./minifiers"),t=require("./captureEvents");function a(a,s,c){let l;function r(){(l=(0,e.createElement)()).className="lovely-chart--tools",s.datasets.length<2&&(l.className+=" lovely-chart--state-hidden"),s.datasets.forEach(({key:a,name:c})=>{const r=(0,e.createElement)("a");r.href="#",r.dataset.key=a,r.className=`lovely-chart--button lovely-chart--color-${s.colors[a].slice(1)} lovely-chart--state-checked`,r.innerHTML=`<span class="lovely-chart--button-check"></span><span class="lovely-chart--button-label">${c}</span>`,r.addEventListener("click",e=>{e.preventDefault(),r.dataset.clickPrevented||o(r),delete r.dataset.clickPrevented}),(0,t.captureEvents)(r,{onLongPress:()=>{r.dataset.clickPrevented="true",o(r,!0)}}),l.appendChild(r)}),a.appendChild(l)}function o(e,t=!1){const a=Array.from(l.getElementsByTagName("a")),s=1===l.querySelectorAll(".lovely-chart--state-checked").length;e&&(e.classList.contains("lovely-chart--state-checked")&&s?t?(a.forEach(e=>e.classList.add("lovely-chart--state-checked")),e.classList.remove("lovely-chart--state-checked")):(e.classList.remove("lovely-chart--state-shake"),requestAnimationFrame(()=>{e.classList.add("lovely-chart--state-shake")})):t?(a.forEach(e=>e.classList.remove("lovely-chart--state-checked")),e.classList.add("lovely-chart--state-checked")):e.classList.toggle("lovely-chart--state-checked"));const r={};a.forEach(e=>{r[e.dataset.key]=e.classList.contains("lovely-chart--state-checked")}),c(r)}return r(),o(),{redraw:function(){if(l){const e=l;e.classList.add("lovely-chart--state-hidden"),setTimeout(()=>{e.parentNode.removeChild(e)},500)}r(),l.classList.add("lovely-chart--state-transparent"),requestAnimationFrame(()=>{l.classList.remove("lovely-chart--state-transparent")})}}}
},{"./minifiers":"tnAp","./captureEvents":"qY6S"}],"paDP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.analyzeData=a;var e=require("./utils"),s=require("./format");function a(e){const{title:a,labelType:t,isStacked:i,isPercentage:n,hasSecondYAxis:l,onZoom:r}=e,{datasets:c,labels:u}=o(e),y={};let d=1/0,m=-1/0;c.forEach(({key:e,color:s,yMin:a,yMax:o})=>{y[e]=s,a<d&&(d=a),o>m&&(m=o)});const b={title:a,xLabels:"hour"===t?(0,s.buildTimeLabels)(u):(0,s.buildDayLabels)(u),datasets:c,isStacked:i,isPercentage:n,hasSecondYAxis:l,onZoom:r,isLines:"line"===e.type,isBars:"bar"===e.type,isAreas:"area"===e.type,isPie:"pie"===e.type,yMin:d,yMax:m,colors:y};return b.shouldZoomToPie=!b.onZoom&&b.isPercentage,b.isZoomable=b.onZoom||b.shouldZoomToPie,b}function o(s){const{type:a,labels:o,datasets:i,hasSecondYAxis:n}=s;return{labels:t(o),datasets:i.map(({name:s,color:o,values:l},r)=>{const{min:c,max:u}=(0,e.getMaxMin)(l);return{type:a,key:`y${r}`,name:s,color:o,values:t(l),hasOwnYAxis:n&&r===i.length-1,yMin:c,yMax:u}})}}function t(e){return e.slice(0)}
},{"./utils":"FO+Z","./format":"6YgZ"}],"ZtA5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createZoomer=a;var e=require("./data"),t=require("./format"),o=require("./constants"),s=require("./skin");function a(a,n,l,i,r,d,c,g,u){let m,h,b=!1;function O(n,O,L){const f=1/a.xLabels.length,Z=O/(a.xLabels.length-1),y={};a.datasets.forEach(({key:e})=>y[e]=!1);const E=(0,e.analyzeData)(n,b||a.shouldZoomToPie?"day":"hour"),_=Object.keys(a.datasets).length!==Object.keys(E.datasets).length;i.update({range:{begin:Z-f/2,end:Z+f/2},filter:y}),setTimeout(()=>{Object.assign(a,E),_&&Object.assign(l,(0,s.createColors)(n.colors)),_&&(c.toggle(b),u.redraw(),r.style.width=`${r.scrollWidth}px`,r.style.height=`${r.scrollHeight}px`),i.update({range:{begin:o.ZOOM_RANGE_MIDDLE-o.ZOOM_RANGE_DELTA,end:o.ZOOM_RANGE_MIDDLE+o.ZOOM_RANGE_DELTA},focusOn:null},!0);const e=1/(b||a.shouldZoomToPie?a.xLabels.length:a.xLabels.length/24)/2;let O,f;b?(O={begin:m.begin,end:m.end},f=_?m.filter:h.filter):_?(O={begin:0,end:1},f={},a.datasets.forEach(({key:e})=>f[e]=!0)):(O={begin:o.ZOOM_RANGE_MIDDLE-e,end:o.ZOOM_RANGE_MIDDLE+e},f=m.filter),i.update({range:O,filter:f,minimapDelta:b?null:O.end-O.begin}),L&&d.zoom((0,t.getFullLabelDate)(L)),b=!b,g.toggleLoading(!1)},i.hasAnimations()?o.ZOOM_TIMEOUT:0),setTimeout(()=>{a.shouldZoomToPie&&r.classList.remove("lovely-chart--state-animating")},i.hasAnimations()?1e3:0)}return{zoomIn:function(e,t){if(b)return;const o=a.xLabels[t];m=e,g.toggleLoading(!0),g.toggleIsZoomed(!0),a.shouldZoomToPie&&(r.classList.add("lovely-chart--state-zoomed-in"),r.classList.add("lovely-chart--state-animating"));const{value:s}=o;(a.shouldZoomToPie?Promise.resolve(function(e){return Object.assign({},n,{type:"pie",labels:n.labels.slice(e-3,e+4),datasets:n.datasets.map(t=>({...t,values:t.values.slice(e-3,e+4)}))})}(t)):a.onZoom(s)).then(e=>O(e,t,o))},zoomOut:function(e){if(!b)return;h=e,g.toggleLoading(!0),g.toggleIsZoomed(!1),a.shouldZoomToPie&&(r.classList.remove("lovely-chart--state-zoomed-in"),r.classList.add("lovely-chart--state-animating"));const t=Math.round((e.labelFromIndex+e.labelToIndex)/2);O(n,t)},isZoomed:function(){return b}}}
},{"./data":"paDP","./format":"6YgZ","./constants":"iJA9","./skin":"Zr5j"}],"13gb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.hideOnScroll=void 0;var t=require("./utils");const e=(()=>{const e=[],o=(0,t.debounce)(function(){e.forEach(t=>{t.classList.remove("lovely-chart--state-invisible")})},500,!0,!1),i=(0,t.debounce)(function(){e.forEach(t=>{const{top:e,bottom:o}=t.getBoundingClientRect(),i=o<0||e>window.innerHeight;t.classList.contains("lovely-chart--state-invisible")||(t.style.width=`${t.scrollWidth}px`,t.style.height=`${t.scrollHeight}px`),t.classList.toggle("lovely-chart--state-invisible",i)})},500,!1,!0);return function(t){e.push(t),1===e.length?window.onscroll=(()=>{o(),i()}):i()}})();exports.hideOnScroll=e;
},{"./utils":"FO+Z"}],"481L":[function(require,module,exports) {

},{}],"baQE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.create=T;var e=require("./StateManager"),t=require("./Header"),a=require("./Axes"),i=require("./Minimap"),n=require("./Tooltip"),r=require("./Tools"),o=require("./Zoomer"),l=require("./skin"),s=require("./data"),d=require("./canvas"),c=require("./preparePoints"),u=require("./Projection"),p=require("./drawDatasets"),h=require("./minifiers"),x=require("./format"),m=require("./hideOnScroll"),b=require("./constants"),f=require("./formulas"),w=require("./utils");function T(T,g){let q,y,I,P,L,v,M,O,D,_,E,S,W=window.innerWidth;const A=(0,s.analyzeData)(g),H=(0,l.createColors)(A.colors),F=(0,w.debounce)(function(){Object.assign(A,(0,s.analyzeData)(g)),y.remove(),C()},500,!1,!0);function C(){(y=(0,h.createElement)()).className=`lovely-chart--container${A.shouldZoomToPie?" lovely-chart--container-type-pie":""}`,T.appendChild(y),v=(0,t.createHeader)(y,A.title,R),function(){const{canvas:e,context:t}=(0,d.setupCanvas)(y,{width:y.clientWidth,height:b.PLOT_HEIGHT});P=t,L={width:(I=e).offsetWidth,height:I.offsetHeight}}(),q=(0,e.createStateManager)(A,L,X),M=(0,a.createAxes)(P,A,L,H),O=(0,i.createMinimap)(y,A,H,z),D=(0,n.createTooltip)(y,A,L,H,G,j),_=(0,r.createTools)(y,A,Z),E=A.isZoomable&&(0,o.createZoomer)(A,g,H,q,y,v,O,D,_),(0,m.hideOnScroll)(y)}function X(e){S=e;const{datasets:t}=A,a={from:e.labelFromIndex,to:e.labelToIndex},i={begin:e.begin,end:e.end,totalXWidth:e.totalXWidth,yMin:e.yMinViewport,yMax:e.yMaxViewport,availableWidth:L.width,availableHeight:L.height-b.X_AXIS_HEIGHT,xPadding:b.GUTTER,yPadding:b.PLOT_TOP_PADDING},n=t.map(({key:t})=>e[`opacity#${t}`]),r=(0,c.preparePoints)(A,t,a,n,i),o=(0,u.createProjection)(i);let l=null,s=null;if(A.hasSecondYAxis){const i=t.find(e=>e.hasOwnYAxis),r={yMin:e.yMinViewportSecond,yMax:e.yMaxViewportSecond};l=(0,c.preparePoints)(A,[i],a,n,r)[0],s=o.copy(r)}v.setCaption(function(e){let t,a;E&&E.isZoomed()?(t=0===e.labelFromIndex?0:e.labelFromIndex+1,a=e.labelToIndex===e.totalXWidth-1?e.labelToIndex:e.labelToIndex-1):(t=e.labelFromIndex,a=e.labelToIndex);return(0,f.isDataRange)(A.xLabels[t],A.xLabels[a])?`${(0,x.getLabelDate)(A.xLabels[t])}`+" - "+`${(0,x.getLabelDate)(A.xLabels[a])}`:(0,x.getFullLabelDate)(A.xLabels[t])}(e)),(0,d.clearCanvas)(I,P);const h=r.reduce((e,t)=>e+t.length,0),m=(0,f.getSimplificationDelta)(h)*b.SIMPLIFIER_PLOT_FACTOR;(0,p.drawDatasets)(P,e,A,a,r,o,l,s,b.PLOT_LINE_WIDTH,n,H,!1,m),A.isPie||(M.drawYAxis(e,o,s),M.drawXAxis(e,o)),O.update(e),D.update(e,r,o,l,s)}function z(e){q.update({range:e})}function Z(e){q.update({filter:e})}function j(e){(A.isBars||A.isPie)&&q.update({focusOn:e})}function G(e){E.zoomIn(S,e)}function R(){E.zoomOut(S)}C(),document.documentElement.addEventListener("darkmode",()=>{q.update()}),window.addEventListener("resize",()=>{window.innerWidth!==W&&(W=window.innerWidth,F())}),window.addEventListener("orientationchange",()=>{F()})}require("./styles/index.scss");
},{"./StateManager":"jzbJ","./Header":"2iNX","./Axes":"ysRd","./Minimap":"QCqL","./Tooltip":"l6Ve","./Tools":"2Uli","./Zoomer":"ZtA5","./skin":"Zr5j","./data":"paDP","./canvas":"Dryx","./preparePoints":"uXfe","./Projection":"v+PH","./drawDatasets":"sPQK","./minifiers":"tnAp","./format":"6YgZ","./hideOnScroll":"13gb","./constants":"iJA9","./formulas":"UAP7","./utils":"FO+Z","./styles/index.scss":"481L"}]},{},["baQE"], "LovelyChart")
//# sourceMappingURL=/LovelyChart.js.map