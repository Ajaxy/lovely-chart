(function(){var ue=Math.PI,ye=Math.abs,me=Math.round,ge=Math.pow,fe=Math.min,xe=Math.floor,ve=Math.max,be=Math.ceil;function e(e,i,a){function n({range:l={},filter:d={},focusOn:a,minimapDelta:n}={},u){Object.assign(s,l),Object.assign(o,d);const y=p;p=t(e,i,s,o,a,n,y),u||r.forEach(({prop:e,duration:t,options:i})=>{const a=c.get(e),n=a?a.to:y[e];if(n!==void 0&&n!==p[e]){const n=a?i.includes("fast")?y[e]:a.current:y[e];a&&c.remove(e),c.add(e,n,p[e],t,i)}}),c.isRunning()||h()}function l(){const e=c.isFast()?re(p,c.getState()):p;a(e)}const s={begin:0,end:1},o=function(){const t={};return e.datasets.forEach(({key:e})=>{t[e]=!0}),t}(),r=function(){const t=[],i=e.datasets.map(({key:e})=>`opacity#${e} 300`);return oe([Ge,i]).forEach(e=>{const[i,a,...n]=e.split(" ");t.push({prop:i,duration:a,options:n})}),t}(),c=d(l),h=he(l);let p={};return{update:n,hasAnimations:function(){return c.isFast()}}}function t(e,t,a,o,d,r,c){const{begin:h,end:p}=a,u=e.xLabels.length-1,y=ve(0,be(u*h)),m=fe(xe(u*p),u),g=l(t.width,y,m),f=e.isStacked?n(e,o,y,m,c):i(e,o,y,m,c),x=s(t.height,f.yMinViewport,f.yMaxViewport),v=e.hasSecondYAxis&&s(t.height,f.yMinViewportSecond,f.yMaxViewportSecond),b=j(x);if(f.yMinViewport-=f.yMinViewport%b,v){const e=j(v);f.yMinViewportSecond-=f.yMinViewportSecond%e}const M={};return e.datasets.forEach(({key:e})=>{M[`opacity#${e}`]=o[e]?1:0}),Object.assign({totalXWidth:u,xAxisScale:g,yAxisScale:x,yAxisScaleSecond:v,labelFromIndex:ve(0,y-1),labelToIndex:fe(m+1,u),filter:Object.assign({},o),focusOn:void 0===d?c.focusOn:d,minimapDelta:void 0===r?c.minimapDelta:r},f,M,a)}function i(e,t,i,n,l){const s=e.hasSecondYAxis&&e.datasets.slice(-1)[0],o=e.datasets.filter(e=>t[e.key]&&e!==s),d=a(e,i,n,l,o);if(s){const o=t[s.key]?[s]:[],{yMinViewport:r,yMaxViewport:c,yMinMinimap:h,yMaxMinimap:p}=a(e,i,n,l,[s]);Object.assign(d,{yMinViewportSecond:r,yMaxViewportSecond:c,yMinMinimapSecond:h,yMaxMinimapSecond:p})}return d}function a(e,t,i,a,n){const{min:l=a.yMinMinimap,max:s=a.yMaxMinimap}=se(oe(n.map(({yMax:e,yMin:t})=>[e,t]))),o=l/s>Ne?l:0;let d,r;if(0===t&&i===e.xLabels.length-1)d=o,r=s;else{const e=n.map(({values:e})=>e),l=e.map(e=>e.slice(t,i+1)),s=se(oe(l)),o=s.min===void 0?a.yMinViewport:s.min;r=s.max===void 0?a.yMaxViewport:s.max,d=o/r>Ne?o:0}return{yMinViewport:d,yMaxViewport:r,yMinMinimap:o,yMaxMinimap:s}}function n(e,t,i,a,n){const l=e.datasets.filter(e=>t[e.key]),s=l.map(({values:e})=>e),o=s.length?de(s):[],{max:d=n.yMaxMinimap}=se(o),{max:r=n.yMaxViewport}=se(o.slice(i,a+1));return{yMinViewport:0,yMaxViewport:r,yMinMinimap:0,yMaxMinimap:d}}function l(e,t,i){const a=xe(e/Oe);return q((i-t)/a)}function s(e,t,i){const a=xe((e-He)/De);return U((i-t)/a)}function o(e){return 1-ge(1-e,1.675)}function d(e){function t(e,t,i,a,n){r[e]={from:t,to:i,duration:a,options:n,current:t,startedAt:Date.now(),progress:0},c||(s(),c=requestAnimationFrame(l))}function i(e){delete r[e],a()||(cancelAnimationFrame(c),c=null)}function a(){return!!Object.keys(r).length}function n(e){return!(!e&&(m||y))&&(null===p||p>=Qe)}function l(){d();const t={};Object.keys(r).forEach(e=>{const{startedAt:a,from:n,to:l,duration:d=we,options:s}=r[e],c=fe(1,(Date.now()-a)/d);let h=n+(l-n)*o(c);s.includes("ceil")?h=be(h):s.includes("floor")&&(h=xe(h)),r[e].current=h,r[e].progress=c,t[e]=h,1===c&&i(e)}),e(t),a()&&(c=requestAnimationFrame(l))}function s(){h=null,u=null,y&&5e3<Date.now()-y&&(y=null),m=!!y||!n(!0)}function d(){!h||Date.now()-h>=Ke?(u&&(p=u,!y&&!n(!0)&&(y=Date.now())),h=Date.now(),u=0):u++}const r={};let c=null,h=null,p=null,u=null,y=null,m=null;return{add:t,remove:i,get:function(e){return r[e]},getState:function(){const e={};return Object.keys(r).forEach(t=>{const{current:i,from:a,to:n,progress:l}=r[t];e[t]=i,e[`${t}From`]=a,e[`${t}To`]=n,e[`${t}Progress`]=l}),e},isRunning:a,isFast:n}}function r(e,t,i){function a(e){c.innerHTML?c.innerHTML!==e&&(c=ae(c,e,"lovely-chart--header-caption lovely-chart--position-right")):(c.innerHTML=e,p=!1)}function n(e){h=!0,r=ae(d,"Zoom Out","lovely-chart--header-title lovely-chart--header-zoom-out-control"),te(r,"click",s),a(e)}function l(){o=nt(),o.className="lovely-chart--header",d=nt(),d.className="lovely-chart--header-title",d.innerHTML=t,o.appendChild(d),c=nt(),c.className="lovely-chart--header-caption lovely-chart--position-right",o.appendChild(c),e.appendChild(o)}function s(){h=!0,d=ae(r,t,"lovely-chart--header-title",!0),i()}let o,d,r,c,h=!1,p=!0;const u=ce(a,400,!1,!0);return l(),{setCaption:u,zoom:n}}function c(e,t,a,n){function l(t,i,l,s,o,d=1,r=null,c=!1){const h=j(l),p=be(s/h)*h,u=xe(o/h)*h;e.font=We,e.textAlign=c?"right":"left",e.textBaseline="bottom",e.lineWidth=1,e.beginPath();for(let y=p;y<=u;y+=h){const[,t]=i.toPixels(0,y),l=_(d,t);e.fillStyle=r?E(n,r,l):E(n,"y-axis-text",l),c?e.fillText(N(y),a.width-Te,t-5):e.fillText(N(y),Te,t-5),c?(e.strokeStyle=E(n,r,d),e.moveTo(a.width-Te,t),e.lineTo(a.width-20,t)):(e.moveTo(Te,t),e.strokeStyle=E(n,"grid-lines",d),e.lineTo(a.width-Te,t))}e.stroke()}return{drawXAxis:function(l,s){e.clearRect(0,a.height-He+1,a.width,31);const o=a.height-15,d=xe(l.xAxisScale),r=R(d),c=1-(l.xAxisScale-d);e.font=We,e.textAlign="center",e.textBaseline="middle";for(let d=l.labelFromIndex;d<=l.labelToIndex;d++){const i=d-Xe;if(0!=i%r)continue;const l=t.xLabels[d],[h]=s.toPixels(d,0);let p=0==i%(2*r)?1:c;p=J(p,h,a.width),e.fillStyle=E(n,"x-axis-text",p),e.fillText(l.text,h,o)}},drawYAxis:function(e,i,a){const{yAxisScale:n,yAxisScaleFrom:s,yAxisScaleTo:o,yAxisScaleProgress:b=0,yMinViewport:d,yMinViewportFrom:r,yMinViewportTo:c,yMaxViewport:h,yMaxViewportFrom:p,yMaxViewportTo:u,yMinViewportSecond:y,yMinViewportSecondFrom:m,yMinViewportSecondTo:g,yMaxViewportSecond:f,yMaxViewportSecondFrom:x,yMaxViewportSecondTo:v}=e,M=a&&`dataset#${t.datasets[0].key}`;if(l(e,i,me(o||n),void 0===c?d:c,void 0===u?h:u,s?b:1,M),0<b&&(void 0!==r||void 0!==p)&&l(e,i,me(s),void 0===r?d:r,void 0===p?h:p,1-b,M),a){const{yAxisScaleSecond:i,yAxisScaleSecondFrom:n,yAxisScaleSecondTo:s,yAxisScaleSecondProgress:o=0}=e,d=`dataset#${t.datasets[t.datasets.length-1].key}`;l(e,a,me(s||i),void 0===g?y:g,void 0===v?f:v,n?o:1,d,!0),0<o&&(void 0!==m||void 0!==x)&&l(e,a,me(n),void 0===m?y:m,void 0===x?f:x,1-o,d,!0)}}}}function h(e,t,i,a){function n(e){const{begin:t,end:i}=e;I||b({begin:t,end:i},!0),c(e)&&(C=re(e,{focusOn:null}),g(T,P),h(C))}function l(e){S.classList.toggle("lovely-chart--state-hidden",!e),requestAnimationFrame(()=>{S.classList.toggle("lovely-chart--state-transparent",!e)})}function s(){S=nt(),S.className="lovely-chart--minimap",S.style.height=`${Ye}px`,d(),r(),e.appendChild(S),A={width:T.offsetWidth,height:T.offsetHeight}}function o(){return{width:e.offsetWidth-20,height:Ye}}function d(){const{canvas:e,context:t}=m(S,o());T=e,P=t}function r(){F=nt(),F.className="lovely-chart--minimap-ruler",F.innerHTML="<div class=\"lovely-chart--minimap-mask\"></div><div class=\"lovely-chart--minimap-slider\"><div class=\"lovely-chart--minimap-slider-handle\"><span class=\"lovely-chart--minimap-slider-handle-pin\"></span></div><div class=\"lovely-chart--minimap-slider-inner\"></div><div class=\"lovely-chart--minimap-slider-handle\"><span class=\"lovely-chart--minimap-slider-handle-pin\"></span></div></div><div class=\"lovely-chart--minimap-mask\"></div>",V=F.children[1],D(V.children[1],{onCapture:p,onDrag:y,onRelease:u,draggingCursor:"grabbing"}),D(V.children[0],{onCapture:p,onDrag:f,onRelease:u,draggingCursor:"ew-resize"}),D(V.children[2],{onCapture:p,onDrag:x,onRelease:u,draggingCursor:"ew-resize"}),S.appendChild(F)}function c(e){if(!C)return!0;const i=t.datasets.map(({key:e})=>`opacity#${e}`);return i.push("yMaxMinimap"),i.some(t=>C[t]!==e[t])}function h(e={}){const{datasets:a}=t,n={from:0,to:e.totalXWidth},l={begin:0,end:1,totalXWidth:e.totalXWidth,yMin:e.yMinMinimap,yMax:e.yMaxMinimap,availableWidth:A.width,availableHeight:A.height,yPadding:1},s=a.map(({key:t})=>G(e,t)),o=v(t,a,n,s,l,!0),d=w(l);let r=null,c=null;if(t.hasSecondYAxis){const i=a.find(e=>e.hasOwnYAxis),l={yMin:e.yMinMinimapSecond,yMax:e.yMaxMinimapSecond};r=v(t,[i],n,s,l)[0],c=d.copy(l)}L(P,e,t,n,o,d,r,c,ze,s,i,!0)}function p(t){I=t.target.offsetLeft}function u(){I=null}function y(e,t,{dragOffsetX:i}){const a=A.width-V.offsetWidth,n=ve(0,fe(I+i-Ze,a)),l=n+V.offsetWidth,s=n/A.width,o=l/A.width;b({begin:s,end:o})}function f(e,t,{dragOffsetX:i}){const a=V.offsetLeft+V.offsetWidth-16,n=fe(a,ve(0,I+i)),l=n/A.width;b({begin:l})}function x(e,t,{dragOffsetX:i}){const a=V.offsetLeft+16,n=A.width,l=ve(a,fe(I+Ze+i,n)),s=l/A.width;b({end:s})}function b(e,t){let i=Object.assign({},E,e);C&&C.minimapDelta&&!t&&(i=M(i)),i.begin===E.begin&&i.end===E.end||(E=i,W(),!t&&a(E))}function M(e){const t=e.begin-E.begin,i=e.end-E.end,a=ye(t),n=ye(i),l=a?t/a:1,s=n?i/n:1,o=E.begin+xe(a/C.minimapDelta)*C.minimapDelta*l,d=E.end+xe(n/C.minimapDelta)*C.minimapDelta*s;return{begin:o,end:d}}function k(){const{begin:e,end:t}=E;F.children[0].style.width=`${100*e}%`,F.children[1].style.width=`${100*(t-e)}%`,F.children[2].style.width=`${100*(1-t)}%`}let S,T,P,A,F,V,I,C,E={};const W=he(k);return s(),b(Se),{update:n,toggle:l}}function p(e,t,i,a,n,l){function s(e){K.classList.toggle("lovely-chart--state-loading",e)}function o(e){ne=e,K.classList.toggle("lovely-chart--state-zoomed",e)}function d(){U=nt(),U.className="lovely-chart--tooltip",r(),c(),"ontouchstart"in window?(te(U,"touchmove",h),te(U,"touchstart",h),te(document,"touchstart",p)):(te(U,"mousemove",h),te(U,"click",u),te(document,"mousemove",p)),e.appendChild(U)}function r(){const{canvas:e,context:t}=m(U,i);J=e,_=t}function c(){K=nt(),K.className="lovely-chart--tooltip-balloon",K.innerHTML="<div class=\"lovely-chart--tooltip-title\"></div><div class=\"lovely-chart--tooltip-legend\"></div><div class=\"lovely-chart--spinner\"></div>",t.isZoomable&&te(K,"click",y),U.appendChild(K)}function h(t){if(!(t.target===K||K.contains(t.target)||ie)){const e=X(U);Q=(t.touches?t.touches[0].clientX:t.clientX)-e.left,G=(t.touches?t.touches[0].clientY:t.clientY)-e.top,le()}}function p(t){null===Q||t.target===U||U.contains(t.target)||f()}function u(t){const e=ie;ie=null,h(t,!0);const i=x();i!==e&&(ie=i)}function y(){if(!K.classList.contains("lovely-chart--state-zoomed")){const e=R.findClosestLabelIndex(Q);n(e)}}function f(e){Q=null,ie=null,g(J,_),D(),!e&&l&&l(null)}function x(){const e=R.findClosestLabelIndex(Q);return e<N.labelFromIndex||e>N.labelToIndex?null:e}function v(e){function n(e,i){return t.isPie?e.slice(N.labelFromIndex,N.labelToIndex+1).reduce((e,t)=>e+t,0):e[i]}if(!Q||!N)return;const s=x();if(null===s)return void f(e);const o=H(),d=!t.isPie||o.distance<=$(R);!e&&l&&(t.isPie?l(o):l(s));const[r]=R.toPixels(s,0),c=t.datasets.map(({key:e,name:t,values:a,hasOwnYAxis:l},o)=>({key:e,name:t,value:n(a,s),hasOwnYAxis:l,originalIndex:o})).filter(({key:e})=>N.filter[e]);c.length&&d?L(c,s):D(),g(J,_),(t.isLines||t.isAreas)&&(t.isLines&&b(c,s),k(r,i.height-He,E(a,"grid-lines")))}function b(e,t){e.forEach(({value:e,key:i,hasOwnYAxis:n,originalIndex:l})=>{const s=t-N.labelFromIndex,o=n?q[s]:Y[l][s];if(o){const[e,l]=n?j.toPixels(t,o.stackValue):R.toPixels(t,o.stackValue);M([e,l],E(a,`dataset#${i}`),E(a,"background"))}})}function M([e,t],i,a){_.strokeStyle=i,_.fillStyle=a,_.lineWidth=2,_.beginPath(),_.arc(e,t,4,0,2*ue),_.fill(),_.stroke()}function k(e,t,i){_.strokeStyle=i,_.lineWidth=1,_.beginPath(),_.moveTo(e,0),_.lineTo(e,t),_.stroke()}function S(e){const i=(N.labelFromIndex+N.labelToIndex)/2,{angle:a}=H(),n=t.isPie?a>ue/2:e<i;return n?Q+Ee:Q-(K.offsetWidth+Ee)}function w(){return t.isPie?`${G}px`:0}function L(e,i){K.style.transform=`translate3D(${S(i)}px, ${w()}, 0)`,K.classList.add("lovely-chart--state-shown"),t.isPie?W(null,e):se(T(t,i),e)}function T(e,t){return ne?ee(e.xLabels[N.labelFromIndex+1],e.xLabels[N.labelToIndex-1])?B(e.xLabels[t],{isShort:!0,displayYear:!1,displayHours:!0}):e.xLabels[t].text:Z(e.xLabels[t],{isShort:!0})}function P(e,t,i,a,n){const l=0<a?e.slice(0,a).reduce((e,t)=>e+t.value,0):0;return n&&2*(l/i*ue)-ue/2<=n.angle&&n.angle<2*((l+t)/i*ue)-ue/2&&n.distance<=$(R)}function A(e){const i=K.children[0];if(t.isPie)i&&(i.style.display="none");else{"none"===i.style.display&&(i.style.display="");const t=i.querySelector(":not(.lovely-chart--state-hidden)");i.innerHTML&&t?t.innerHTML!==e&&ae(t,e,"lovely-chart--tooltip-title-inner"):i.innerHTML=`<span>${e}</span>`}}function F(e,{name:t,key:i,value:a},n){const l=nt();l.className="lovely-chart--tooltip-dataset",l.setAttribute("data-present","true"),l.setAttribute("data-name",t),l.innerHTML=`<span class="lovely-chart--dataset-title">${t}</span><span class="${`lovely-chart--tooltip-dataset-value lovely-chart--position-right lovely-chart--color-dataset-${i}`}">${a}</span>`,I(l,a,n);const s=e.querySelector(`[data-total="true"]`);s?e.insertBefore(l,s):e.appendChild(l)}function V(e,{key:t,value:i}={},a){e.setAttribute("data-present","true");const n=e.querySelector(`.lovely-chart--tooltip-dataset-value.lovely-chart--color-dataset-${t}:not(.lovely-chart--state-hidden)`),l=z(i);n.innerHTML!==l&&ae(n,l,`lovely-chart--tooltip-dataset-value lovely-chart--position-right lovely-chart--color-dataset-${t}`),I(e,i,a)}function I(e,i,a){if(!t.isPercentage)return;if(t.isPie)return void Array.from(e.querySelectorAll(`.lovely-chart--percentage-title`)).forEach(t=>t.remove());const n=me(100*(i/a)),l=e.querySelector(`.lovely-chart--percentage-title:not(.lovely-chart--state-hidden)`);if(!l){const t=nt("span");t.className="lovely-chart--percentage-title lovely-chart--position-left",t.innerHTML=`${n}%`,e.prepend(t)}else`${n}%`!==l.innerHTML&&ae(l,`${n}%`,"lovely-chart--percentage-title lovely-chart--position-left")}function C(e){const i=K.children[1];t.isPie&&i.classList.add("lovely-chart--tooltip-legend-pie"),Array.from(i.children).forEach(e=>{!t.isPie&&i.classList.contains("lovely-chart--tooltip-legend-pie")?e.remove():e.setAttribute("data-present","false")});const a=e.reduce((e,t)=>e+t.value,0),n=H(),l=t.isPie?e.filter(({value:t},i)=>P(e,t,a,i,n)):e;l.forEach(e=>{const t=i.querySelector(`[data-name="${e.name}"]`);t?V(t,e,a):F(i,e,a)}),t.isBars&&t.isStacked&&O(i,z(a)),Array.from(i.querySelectorAll("[data-present=\"false\"]")).forEach(e=>{e.remove()})}function W(e,t){A(e),C(t)}function O(e,t){const i=e.querySelector(`[data-total="true"]`),a=`lovely-chart--tooltip-dataset-value lovely-chart--position-right`;if(!i){const i=nt();i.className="lovely-chart--tooltip-dataset",i.setAttribute("data-present","true"),i.setAttribute("data-total","true"),i.innerHTML=`<span>All</span><span class="${a}">${t}</span>`,e.appendChild(i)}else{i.setAttribute("data-present","true");const e=i.querySelector(`.lovely-chart--tooltip-dataset-value:not(.lovely-chart--state-hidden)`);e.innerHTML!==t&&ae(e,t,a)}}function D(){K.classList.remove("lovely-chart--state-shown")}function H(){var e=Math.sqrt,t=Math.atan2;const{width:i,height:a}=U.getBoundingClientRect(),n=[i/2,a/2],l=t(G-n[1],Q-n[0]),s=e((Q-n[0])**2+(G-n[1])**2);return{angle:l>=-ue/2?l:2*ue+l,distance:s}}function X(e){return e.getBoundingClientRect()}let N,Y,R,q,j,U,J,_,K,Q,G,ie=null,ne=!1;const le=he(v),se=ce(W,400,!0,!0);return d(),{update:function(e,t,i,a,n){N=e,Y=t,R=i,q=a,j=n,v(!0)},toggleSpinner:s,toggleIsZoomed:o}}function u(e,t,i){function a(){if(s){const e=s;e.classList.add("lovely-chart--state-hidden"),setTimeout(()=>{e.parentNode.removeChild(e)},500)}n(),s.classList.add("lovely-chart--state-transparent"),requestAnimationFrame(()=>{s.classList.remove("lovely-chart--state-transparent")})}function n(){s=nt(),s.className="lovely-chart--tools",2>t.datasets.length&&(s.className+=" lovely-chart--state-hidden"),t.datasets.forEach(({key:e,name:t})=>{const i=nt("a");i.href="#",i.dataset.key=e,i.className=`lovely-chart--button lovely-chart--color-dataset-${e} lovely-chart--state-checked`,i.innerHTML=`<span class="lovely-chart--button-check"></span><span class="lovely-chart--button-label">${t}</span>`,i.addEventListener("click",t=>{t.preventDefault(),i.dataset.clickPrevented||l(i),delete i.dataset.clickPrevented}),D(i,{onLongPress:()=>{"ontouchstart"in window||(i.dataset.clickPrevented="true"),l(i,!0)}}),s.appendChild(i)}),e.appendChild(s)}function l(e,t=!1){const a=Array.from(s.getElementsByTagName("a")),n=1===s.querySelectorAll(".lovely-chart--state-checked").length;e&&(e.classList.contains("lovely-chart--state-checked")&&n?t?(a.forEach(e=>e.classList.add("lovely-chart--state-checked")),e.classList.remove("lovely-chart--state-checked")):(e.classList.remove("lovely-chart--state-shake"),requestAnimationFrame(()=>{e.classList.add("lovely-chart--state-shake")})):t?(a.forEach(e=>e.classList.remove("lovely-chart--state-checked")),e.classList.add("lovely-chart--state-checked")):e.classList.toggle("lovely-chart--state-checked"));const l={};a.forEach(e=>{l[e.dataset.key]=e.classList.contains("lovely-chart--state-checked")}),i(l)}let s;return n(),l(),{redraw:a}}function y(e,t,i,a,n,l,s,o){function d(t,i){if(m)return;const a=e.xLabels[i];p=t,n.zoom(Z(a)),s.toggleSpinner(!0),s.toggleIsZoomed(!0);const{value:l}=a,o=e.shouldZoomToPie?Promise.resolve(h(t)):e.onZoom(l);o.then(e=>c(e,i))}function r(){return m}function c(t,n){s.toggleSpinner(!1);const d=1/e.xLabels.length,r=n/(e.xLabels.length-1),c={};e.datasets.forEach(({key:e})=>c[e]=!1);const h=f(t,m||e.shouldZoomToPie?"days":"hours"),g=Object.keys(e.datasets).length!==Object.keys(h.datasets).length;a.update({range:{begin:r-d/2,end:r+d/2},filter:c}),setTimeout(()=>{y=m?null:Z(e.xLabels[n]),Object.assign(e,h),g&&Object.assign(i,C(t.colors)),g&&(l.toggle(m),o.redraw()),a.update({range:{begin:qe-Re,end:qe+Re},focusOn:null},!0);const s=m||e.shouldZoomToPie?e.xLabels.length:e.xLabels.length/24,d=1/s/2;let r,c;m?(r={begin:p.begin,end:p.end},c=g?p.filter:u.filter):g?(r={begin:0,end:1},c={},e.datasets.forEach(({key:e})=>c[e]=!0)):(r={begin:qe-d,end:qe+d},c=p.filter),a.update({range:r,filter:c,minimapDelta:m?null:r.end-r.begin}),m=!m},a.hasAnimations()?Be:0)}function h(e){const i=Object.assign({},t);return i.columns=t.columns.map(t=>{const i=t.slice(e.labelFromIndex+1,e.labelToIndex+1);return i.unshift(t[0]),i}),i.types={},Object.keys(t.types).forEach(e=>{"x"!==e&&(i.types[e]="pie")}),i.pie=!0,i}let p,u,y,m=!1;return{zoomIn:d,zoomOut:function(e){u=e,s.toggleIsZoomed(!1);const i=me((e.labelFromIndex+e.labelToIndex)/2);c(t,i)},isZoomed:r}}function m(e,{width:t,height:i}){const a=nt("canvas");a.width=t*Me,a.height=i*Me,a.style.width="100%",a.style.height=`${i}px`;const n=a.getContext("2d");return n.scale(Me,Me),e.appendChild(a),{canvas:a,context:n}}function g(e,t){t.clearRect(0,0,e.width,e.height)}function f(e,t){const{datasets:i,labels:a}=x(e);let n=1/0,l=-Infinity;i.forEach(e=>{const{min:t,max:i}=se(e.values);t<n&&(n=t),i>l&&(l=i),e.yMin=t,e.yMax=i});const s={datasets:i,yMin:n,yMax:l,xLabels:"hours"===t?X(a):H(a),hasSecondYAxis:e.y_scaled,isStacked:e.stacked,isPercentage:e.percentage,isPie:e.pie,isLines:i.some(({type:e})=>"line"===e),isBars:i.some(({type:e})=>"bar"===e),isAreas:i.some(({type:e})=>"area"===e),onZoom:e.x_on_zoom};return s.shouldZoomToPie=!s.onZoom&&s.isPercentage,s.isZoomable=s.onZoom||s.shouldZoomToPie,s}function x(e){const{columns:t,names:a,types:n,y_scaled:l}=e;let s=[];const o=[];return t.forEach((e,d)=>{const i=e.slice(0),r=i.shift();return r===ke?void(s=i):void o.push({key:r,name:a[r],type:n[r],values:i,hasOwnYAxis:l&&d===t.length-1})}),{datasets:o,labels:s}}function v(e,t,a,n,l,s){let o=t.map(({values:e})=>e.slice(a.from,a.to+1));e.isPie&&!s&&(o=S(o));const d=o.map((t,l)=>t.map((t,i)=>{let s=t;return e.isStacked&&(s*=n[l]),{labelIndex:a.from+i,value:t,visibleValue:s,stackOffset:0,stackValue:s}}));return e.isPercentage&&M(d,l),e.isStacked&&k(d),d}function b(e){return de(e.map(e=>e.map(({visibleValue:e})=>e)))}function M(e,t){const i=b(e);e.forEach(e=>{e.forEach((e,a)=>{e.percent=e.visibleValue/i[a],e.visibleValue=e.percent*t.yMax})})}function k(e){const t=[];e.forEach(e=>{e.forEach((e,i)=>{t[i]===void 0&&(t[i]=0),e.stackOffset=t[i],t[i]+=e.visibleValue,e.stackValue=t[i]})})}function S(e){return e.map(e=>[e.reduce((e,t)=>e+t,0)])}function w(e){function t(e,t){return[e*u-y,r-(t*g-f)]}function i(e){return me((e+y)/u)}const{begin:a,end:n,totalXWidth:l,yMin:s,yMax:o,availableWidth:d,availableHeight:r,xPadding:c=0,yPadding:h=0}=e;let p=d;0===a&&(p-=c),1===n&&(p-=c);const u=p/((n-a)*l);let y=a*l*u;0===a&&(y-=c);const m=r-h,g=m/(o-s),f=s*g;return{toPixels:t,findClosestLabelIndex:i,copy:function(t,i){return w(re(e,t),i)},getCenter:function(){return[d/2,r-m/2]},getSize:function(){return[d,m]},getParams:function(){return e}}}function L(e,t,a,n,l,s,o,d,r,c,h,p){if(a.datasets.forEach(({key:u,type:y,hasOwnYAxis:m},g)=>{if(!c[g])return;const i={color:E(h,`dataset#${u}`),lineWidth:r,opacity:a.isStacked?1:c[g]},f="pie"===y&&p?"bar":y;let x=m?o:l[g],v=m?d:s;if("area"===f){const{yMin:e,yMax:t}=s.getParams(),i=t-e,a=[{labelIndex:n.from,stackValue:0},{labelIndex:n.to,stackValue:0}],o=[{labelIndex:n.to,stackValue:i},{labelIndex:n.from,stackValue:i}];x=oe([l[g-1]||a,o])}if("pie"===f&&(i.center=s.getCenter(),i.radius=$(s),i.pointerVector=t.focusOn),"bar"===f){const[e]=s.toPixels(0,0),[a]=s.toPixels(1,0);i.lineWidth=a-e,i.focusOn=t.focusOn}T(f,e,x,v,i)}),t.focusOn&&a.isBars){const[i]=s.toPixels(0,0),[a]=s.toPixels(1,0);F(e,s,{focusOn:t.focusOn,color:E(h,"mask"),lineWidth:a-i})}}function T(e,...t){return"line"===e?P(...t):"bar"===e?A(...t):"area"===e?V(...t):"pie"===e?I(...t):void 0}function P(e,t,i,a){e.beginPath();for(let n=0,s=t.length;n<s;n++){const{labelIndex:a,stackValue:l}=t[n],[s,o]=i.toPixels(a,l);e.lineTo(s,o)}e.save(),e.strokeStyle=a.color,e.lineWidth=a.lineWidth,e.globalAlpha=a.opacity,e.lineJoin="bevel",e.lineCap="butt",e.stroke(),e.restore()}function A(e,t,i,a){const{yMin:n}=i.getParams();e.save(),e.globalAlpha=a.opacity,e.fillStyle=a.color;for(let s=0,o=t.length;s<o;s++){const{labelIndex:l,stackValue:o,stackOffset:d=0}=t[s],[,r]=i.toPixels(l,ve(d,n)),[c,h]=i.toPixels(l,o),p=c-a.lineWidth/2,u=1===a.opacity?a.lineWidth+Ce:a.lineWidth;e.fillRect(p,h,u,r-h)}e.restore()}function F(e,t,i){const[a,n]=t.getCenter(),[l,s]=t.getSize(),[o]=t.toPixels(i.focusOn,0);e.fillStyle=i.color,e.fillRect(a-l/2,n-s/2,o-i.lineWidth/2+Ce,s),e.fillRect(o+i.lineWidth/2,n-s/2,l-(o+i.lineWidth/2),s)}function V(e,t,i,a){e.beginPath();for(let n=0,s=t.length;n<s;n++){const{labelIndex:a,stackValue:l}=t[n],[s,o]=i.toPixels(a,l);e.lineTo(s,o)}e.save(),e.fillStyle=a.color,e.lineWidth=a.lineWidth,e.globalAlpha=a.opacity,e.lineJoin="bevel",e.lineCap="butt",e.fill(),e.restore()}function I(e,t,i,a){const{visibleValue:n,stackValue:l,stackOffset:s=0}=t[0];if(!n)return;const{yMin:o,yMax:d}=i.getParams(),r=1/(d-o),c=n*r,h=2*(s*r*ue)-ue/2,p=2*(l*r*ue)-ue/2,{radius:m=120,center:[g,f],pointerVector:u}=a,y=u&&h<=u.angle&&u.angle<p&&u.distance<=m?Ie:0,x=(h+p)/2,v=Math.cos(x),b=Math.sin(x),M=v*y,k=b*y;e.save(),e.beginPath(),e.fillStyle=a.color,e.moveTo(g+M,f+k),e.arc(g+M,f+k,m,h,p),e.lineTo(g+M,f+k),e.fill(),e.font=`700 ${K(c,m)}px Helvetica, Arial, sans-serif`,e.textAlign="center",e.textBaseline="middle",e.fillStyle="white";const S=Q(c,m);e.fillText(`${me(100*c)}%`,g+v*S+M,f+b*S+k),e.restore()}function C(e){const t={};return["skin-day","skin-night"].forEach(i=>{t[i]={},Object.keys(tt[i]).forEach(e=>{t[i][e]=W(tt[i][e])}),Object.keys(e).forEach(a=>{t[i][`dataset#${a}`]=W(e[a])})}),t}function E(e,t,i){return O(e[et][t],i)}function W(e){const[t,i]=e.replace("#","").split("/");return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16),i?parseFloat(i):1]}function O([e,t,i,n=1],a=1){return`rgba(${e}, ${t}, ${i}, ${n*a})`}function D(e,t){function i(i){l=i,"mousedown"===i.type?(te(document,"mousemove",n),te(document,"mouseup",a)):"touchstart"===i.type&&(te(document,"touchmove",n),te(document,"touchend",a),te(document,"touchcancel",a),i.pageX===void 0&&(i.pageX=i.touches[0].pageX)),t.draggingCursor&&document.body.classList.add(`cursor-${t.draggingCursor}`),t.onCapture&&t.onCapture(i),t.onLongPress&&(s=setTimeout(()=>t.onLongPress(),Le))}function a(i){l&&(s&&(clearTimeout(s),s=null),t.draggingCursor&&document.body.classList.remove(`cursor-${t.draggingCursor}`),ie(document,"mouseup",a),ie(document,"mousemove",n),ie(document,"touchcancel",a),ie(document,"touchend",a),ie(document,"touchmove",n),l=null,t.onRelease&&t.onRelease(i))}function n(i){l&&(s&&(clearTimeout(s),s=null),"touchmove"===i.type&&i.pageX===void 0&&(i.pageX=i.touches[0].pageX),t.onDrag&&t.onDrag(i,l,{dragOffsetX:i.pageX-l.pageX}))}let l=null,s=null;te(e,"mousedown",i),te(e,"touchstart",i)}function H(e){return e.map(e=>{const t=new Date(e),i=t.getDate(),a=Ue[t.getMonth()];return{value:e,text:`${i} ${a}`}})}function X(e){return e.map(e=>{const t=new Date(e),i=t.getUTCHours(),a=t.getUTCMinutes();return{value:e,text:`${10>i?"0":""}${i}:${10>a?"0":""}${a}`}})}function N(e,t=1){if(1e6<=e)return Y(e/1e6,t)+"M";return 1e3<=e?Y(e/1e3,t)+"K":e}function Y(e,t){return e.toFixed(t).replace(/(\d{3,})\.\d+/,"$1").replace(/\.0+$/,"")}function z(e){return(e+"").replace(/\d(?=(\d{3})+$)/g,"$& ")}function Z(e,{isShort:t=!1}={}){return B(e,{isShort:t,displayWeekDay:!0})}function B(e,{isShort:t=!1,displayWeekDay:i=!1,displayYear:a=!0,displayHours:n=!1}={}){const{value:l}=e,s=new Date(l),o=t?Ue:je,d=t?_e:Je;let r=`${s.getUTCDate()} ${o[s.getUTCMonth()]}`;return i&&(r=`${d[s.getUTCDay()]}, `+r),a&&(r+=` ${s.getUTCFullYear()}`),n&&(r+=`, ${("0"+s.getUTCHours()).slice(-2)}:${("0"+s.getUTCMinutes()).slice(-2)}`),r}function R(e){return ge(2,e)}function q(e){return be(Math.log2(e||1))}function j(e){return it[e]||it[it.length-1]}function U(e){return it.findIndex(t=>t>=e)||it.length-1}function J(e,t,i){const a=fe(t+Te,i-t);return 40>=a&&(e=fe(1,e,a/40)),e}function _(e,t){return t-Te<=20?fe(1,e,(t-Te)/20):e}function $(e){return fe(...e.getSize())*Ve}function K(e,t){return(t+150*e)/8}function Q(e,t){return .99<=e?0:fe(1-Math.log(30*e)/5,4/5)*t}function G(e,t){return ve(0,fe(2*e[`opacity#${t}`]-1,1))}function ee(e,t){return ye(t.value-e.value)>$e}function te(e,t,i){e.addEventListener(t,i)}function ie(e,t,i){e.removeEventListener(t,i)}function ae(e,t,i="",a=!1){const n=e.parentNode;n.classList.add("lovely-chart--transition-container");const l=nt(e.tagName);l.className=`${i} lovely-chart--transition lovely-chart--position-${a?"top":"bottom"} lovely-chart--state-hidden`,l.innerHTML=t;const s=i.length?`.${i.split(" ").join(".")}`:"",o=n.querySelectorAll(`${s}.lovely-chart--state-hidden`);return o.forEach(t=>t.remove()),e.classList.add("lovely-chart--transition"),e.classList.remove("lovely-chart--position-bottom","lovely-chart--position-top"),e.classList.add(a?"lovely-chart--position-bottom":"lovely-chart--position-top"),n.insertBefore(l,e.nextSibling),ne(l),le(e),l}function ne(e){e.classList.remove("lovely-chart--state-animated"),e.classList.add("lovely-chart--state-animated"),e.classList.remove("lovely-chart--state-hidden")}function le(e){e.classList.remove("lovely-chart--state-animated"),e.classList.add("lovely-chart--state-animated"),e.classList.add("lovely-chart--state-hidden")}function se(e){const t=e.length;let a=e[0],n=e[0];for(let l=0;l<t;l++){const t=e[l];t>a?a=t:t<n&&(n=t)}return{max:a,min:n}}function oe(e){return[].concat.apply([],e)}function de(e){const t=[],a=e.length;for(let n=0,i=e[0].length;n<i;n++){t[n]=0;for(let i=0;i<a;i++)t[n]+=e[i][n]}return t}function re(e,t){return new Proxy({},{get:(i,a)=>void 0===t[a]?e[a]:t[a]})}function ce(e,t,i=!0,a=!0){let n,l,s=!1;return function(...o){n=o,l=!0,s||(i&&(l=!1,e(...n)),s=!0,setTimeout(()=>{s=!1,a&&l&&e(...n)},t))}}function he(e){let t,i=!1;return function(...a){t=a,i||(i=!0,requestAnimationFrame(()=>{i=!1,e(...t)}))}}function pe(e,t,i=!0,a=!0){let n=null;return function(){n?(clearTimeout(n),n=null):i&&e(),n=setTimeout(()=>{a&&e(),n=null},t)}}window.Chart={render:function(t,i){function a(){n(),V=r(T,i.title,M),l(),S=e(N,F,s),I=c(A,N,F,X),E=h(T,N,X,o),W=p(T,N,F,X,b,x),O=u(T,N,d),D=N.isZoomable&&y(N,i,X,S,V,E,W,O)}function n(){T=nt(),T.className=`lovely-chart--container`,at(T),t.appendChild(T)}function l(){const{canvas:e,context:t}=m(T,{width:T.clientWidth,height:Pe});P=e,A=t,F={width:P.offsetWidth,height:P.offsetHeight}}function s(e){H=e;const{datasets:t}=N,i={from:e.labelFromIndex,to:e.labelToIndex},a={begin:e.begin,end:e.end,totalXWidth:e.totalXWidth,yMin:e.yMinViewport,yMax:e.yMaxViewport,availableWidth:F.width,availableHeight:F.height-He,xPadding:Te,yPadding:Ae},n=t.map(({key:t})=>e[`opacity#${t}`]),l=v(N,t,i,n,a),s=w(a);let o=null,d=null;if(N.hasSecondYAxis){const a=t.find(e=>e.hasOwnYAxis),l={yMin:e.yMinViewportSecond,yMax:e.yMaxViewportSecond};o=v(N,[a],i,n,l)[0],d=s.copy(l)}const r=D&&D.isZoomed()&&!ee(N.xLabels[e.labelFromIndex+1],N.xLabels[e.labelToIndex-1])?Z(N.xLabels[e.labelFromIndex]):`${B(N.xLabels[e.labelFromIndex+1])}`+" - "+`${B(N.xLabels[e.labelToIndex-1])}`;V.setCaption(r),g(P,A),L(A,e,N,i,l,s,o,d,Fe,n,X),N.isPie||(I.drawYAxis(e,s,d),I.drawXAxis(e,s)),E.update(e),W.update(e,l,s,o,d)}function o(e){S.update({range:e})}function d(e){S.update({filter:e})}function x(e){(N.isBars||N.isPie)&&S.update({focusOn:e})}function b(e){D.zoomIn(H,e)}function M(){D.zoomOut(H)}function k(){T.remove(),a()}let S,T,P,A,F,V,I,E,W,O,D,H;const X=C(i.colors),N=f(i),Y=pe(k,500,!1,!0);a(),function(){document.documentElement.addEventListener("darkmode",()=>{S.update()}),window.addEventListener("resize",()=>{Y()}),window.addEventListener("orientationchange",()=>{Y()})}()}};const Me=window.devicePixelRatio||1,ke="x",Se={begin:.8,end:1},we=300,Le=500,Te=10,Pe=320,Ae=10,Fe=2,Ve=.9/2,Ie=10,Ce=.5,Ee=20,We="300 10px Helvetica, Arial, sans-serif",Oe=45,De=40,He=30,Xe=1,Ne=.1,Ye=40,ze=1,Ze=8,Be=we,Re=.1,qe=.5,je=["January","February","March","April","May","June","July","August","September","October","November","December"],Ue=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],Je=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_e=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],$e=86400000,Ke=200,Qe=8,Ge=["begin 200 fast","end 200 fast","labelFromIndex 200 fast floor","labelToIndex 200 fast ceil","xAxisScale 400","yMinViewport","yMaxViewport","yMinViewportSecond","yMaxViewportSecond","yMinMinimap","yMaxMinimap","yMinMinimapSecond","yMaxMinimapSecond","yAxisScale","yAxisScaleSecond"];let et="skin-day";const tt={"skin-day":{background:"#FFFFFF","text-color":"#222222","minimap-mask":"#E2EEF9/0.6","minimap-slider":"#C0D1E1","grid-lines":"#182D3B/0.1","zoom-out-text":"#108BE3","tooltip-background":"#FFFFFF","tooltip-arrow":"#D2D5D7",mask:"#FFFFFF/0.5","x-axis-text":"#252529/0.6","y-axis-text":"#252529/0.6"},"skin-night":{background:"#242F3E","text-color":"#FFFFFF","minimap-mask":"#304259/0.6","minimap-slider":"#56626D","grid-lines":"#FFFFFF/0.1","zoom-out-text":"#48AAF0","tooltip-background":"#1c2533","tooltip-arrow":"#D2D5D7",mask:"#242F3E/0.5","x-axis-text":"#A3B1C2/0.6","y-axis-text":"#A3B1C2/0.6"}};document.documentElement.addEventListener("darkmode",()=>{et=document.documentElement.classList.contains("dark")?"skin-night":"skin-day"});const it=[1,2,8,18,50,100,250,500,1e3,2500,5e3,1e4,25e3,5e4,1e5,25e4,5e5,1e6,25e5,5e6,1e7,25e6,5e7,1e8],at=(()=>{const e=[],t=pe(function(){e.forEach(e=>{e.classList.remove("lovely-chart--state-invisible")})},500,!0,!1),i=pe(function(){e.forEach(e=>{const{top:t,bottom:i}=e.getBoundingClientRect(),a=0>i||t>window.innerHeight;e.classList.toggle("lovely-chart--state-invisible",a)})},500,!1,!0);return function(a){e.push(a),1===e.length&&(window.onscroll=()=>{t(),i()})}})(),nt=(e="div")=>document.createElement(e)})();